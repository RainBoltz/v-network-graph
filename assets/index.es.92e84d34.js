import{K as Ae,d as oe,e as A,r as q,j as X,I as Ce,N as mr,O as Ue,u as P,P as Gt,w as Oe,s as at,x as wt,J as et,c as C,k as Q,F as G,q as ue,h as le,Q as yr,a as pe,M as kn,R as br,o as O,m as je,f as Vt,b as wr,t as $n,l as Le,n as ge,S as xt,B as Ge,T as In,C as Ft,z as ke,U as Pt,V as Et,W as xr}from"./element-plus.efa1ba9e.js";var Pr=Object.defineProperty,Er=Object.defineProperties,Sr=Object.getOwnPropertyDescriptors,zn=Object.getOwnPropertySymbols,Or=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,me=Math.pow,Nn=(e,t,n)=>t in e?Pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$e=(e,t)=>{for(var n in t||(t={}))Or.call(t,n)&&Nn(e,n,t[n]);if(zn)for(var n of zn(t))Mr.call(t,n)&&Nn(e,n,t[n]);return e},Xt=(e,t)=>Er(e,Sr(t));function _r(){this.__data__=[],this.size=0}function lt(e,t){return e===t||e!==e&&t!==t}function St(e,t){for(var n=e.length;n--;)if(lt(e[n][0],t))return n;return-1}var Tr=Array.prototype,Ar=Tr.splice;function Cr(e){var t=this.__data__,n=St(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():Ar.call(t,n,1),--this.size,!0}function kr(e){var t=this.__data__,n=St(t,e);return n<0?void 0:t[n][1]}function $r(e){return St(this.__data__,e)>-1}function Ir(e,t){var n=this.__data__,o=St(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}function Ie(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Ie.prototype.clear=_r;Ie.prototype.delete=Cr;Ie.prototype.get=kr;Ie.prototype.has=$r;Ie.prototype.set=Ir;function zr(){this.__data__=new Ie,this.size=0}function Nr(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Zr(e){return this.__data__.get(e)}function Dr(e){return this.__data__.has(e)}var jr=typeof global=="object"&&global&&global.Object===Object&&global,Zn=jr,Lr=typeof self=="object"&&self&&self.Object===Object&&self,Br=Zn||Lr||Function("return this")(),ye=Br,Rr=ye.Symbol,Be=Rr,Dn=Object.prototype,qr=Dn.hasOwnProperty,Hr=Dn.toString,ut=Be?Be.toStringTag:void 0;function Wr(e){var t=qr.call(e,ut),n=e[ut];try{e[ut]=void 0;var o=!0}catch{}var r=Hr.call(e);return o&&(t?e[ut]=n:delete e[ut]),r}var Ur=Object.prototype,Gr=Ur.toString;function Vr(e){return Gr.call(e)}var Fr="[object Null]",Xr="[object Undefined]",jn=Be?Be.toStringTag:void 0;function Ve(e){return e==null?e===void 0?Xr:Fr:jn&&jn in Object(e)?Wr(e):Vr(e)}function Me(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Yr="[object AsyncFunction]",Kr="[object Function]",Qr="[object GeneratorFunction]",Jr="[object Proxy]";function Yt(e){if(!Me(e))return!1;var t=Ve(e);return t==Kr||t==Qr||t==Yr||t==Jr}var ei=ye["__core-js_shared__"],Kt=ei,Ln=function(){var e=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ti(e){return!!Ln&&Ln in e}var ni=Function.prototype,oi=ni.toString;function Fe(e){if(e!=null){try{return oi.call(e)}catch{}try{return e+""}catch{}}return""}var ri=/[\\^$.*+?()[\]{}|]/g,ii=/^\[object .+?Constructor\]$/,si=Function.prototype,ai=Object.prototype,li=si.toString,ui=ai.hasOwnProperty,ci=RegExp("^"+li.call(ui).replace(ri,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function di(e){if(!Me(e)||ti(e))return!1;var t=Yt(e)?ci:ii;return t.test(Fe(e))}function fi(e,t){return e==null?void 0:e[t]}function Xe(e,t){var n=fi(e,t);return di(n)?n:void 0}var hi=Xe(ye,"Map"),ct=hi,vi=Xe(Object,"create"),dt=vi;function pi(){this.__data__=dt?dt(null):{},this.size=0}function gi(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mi="__lodash_hash_undefined__",yi=Object.prototype,bi=yi.hasOwnProperty;function wi(e){var t=this.__data__;if(dt){var n=t[e];return n===mi?void 0:n}return bi.call(t,e)?t[e]:void 0}var xi=Object.prototype,Pi=xi.hasOwnProperty;function Ei(e){var t=this.__data__;return dt?t[e]!==void 0:Pi.call(t,e)}var Si="__lodash_hash_undefined__";function Oi(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=dt&&t===void 0?Si:t,this}function Ye(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Ye.prototype.clear=pi;Ye.prototype.delete=gi;Ye.prototype.get=wi;Ye.prototype.has=Ei;Ye.prototype.set=Oi;function Mi(){this.size=0,this.__data__={hash:new Ye,map:new(ct||Ie),string:new Ye}}function _i(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ot(e,t){var n=e.__data__;return _i(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Ti(e){var t=Ot(this,e).delete(e);return this.size-=t?1:0,t}function Ai(e){return Ot(this,e).get(e)}function Ci(e){return Ot(this,e).has(e)}function ki(e,t){var n=Ot(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}function ze(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ze.prototype.clear=Mi;ze.prototype.delete=Ti;ze.prototype.get=Ai;ze.prototype.has=Ci;ze.prototype.set=ki;var $i=200;function Ii(e,t){var n=this.__data__;if(n instanceof Ie){var o=n.__data__;if(!ct||o.length<$i-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new ze(o)}return n.set(e,t),this.size=n.size,this}function _e(e){var t=this.__data__=new Ie(e);this.size=t.size}_e.prototype.clear=zr;_e.prototype.delete=Nr;_e.prototype.get=Zr;_e.prototype.has=Dr;_e.prototype.set=Ii;var zi="__lodash_hash_undefined__";function Ni(e){return this.__data__.set(e,zi),this}function Zi(e){return this.__data__.has(e)}function Mt(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new ze;++t<n;)this.add(e[t])}Mt.prototype.add=Mt.prototype.push=Ni;Mt.prototype.has=Zi;function Di(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function ji(e,t){return e.has(t)}var Li=1,Bi=2;function Bn(e,t,n,o,r,s){var a=n&Li,i=e.length,u=t.length;if(i!=u&&!(a&&u>i))return!1;var c=s.get(e),l=s.get(t);if(c&&l)return c==t&&l==e;var f=-1,m=!0,x=n&Bi?new Mt:void 0;for(s.set(e,t),s.set(t,e);++f<i;){var g=e[f],h=t[f];if(o)var w=a?o(h,g,f,t,e,s):o(g,h,f,e,t,s);if(w!==void 0){if(w)continue;m=!1;break}if(x){if(!Di(t,function(p,v){if(!ji(x,v)&&(g===p||r(g,p,n,o,s)))return x.push(v)})){m=!1;break}}else if(!(g===h||r(g,h,n,o,s))){m=!1;break}}return s.delete(e),s.delete(t),m}var Ri=ye.Uint8Array,_t=Ri;function qi(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n}function Hi(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n}var Wi=1,Ui=2,Gi="[object Boolean]",Vi="[object Date]",Fi="[object Error]",Xi="[object Map]",Yi="[object Number]",Ki="[object RegExp]",Qi="[object Set]",Ji="[object String]",es="[object Symbol]",ts="[object ArrayBuffer]",ns="[object DataView]",Rn=Be?Be.prototype:void 0,Qt=Rn?Rn.valueOf:void 0;function os(e,t,n,o,r,s,a){switch(n){case ns:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ts:return!(e.byteLength!=t.byteLength||!s(new _t(e),new _t(t)));case Gi:case Vi:case Yi:return lt(+e,+t);case Fi:return e.name==t.name&&e.message==t.message;case Ki:case Ji:return e==t+"";case Xi:var i=qi;case Qi:var u=o&Wi;if(i||(i=Hi),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;o|=Ui,a.set(e,t);var l=Bn(i(e),i(t),o,r,s,a);return a.delete(e),l;case es:if(Qt)return Qt.call(e)==Qt.call(t)}return!1}function rs(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}var is=Array.isArray,be=is;function ss(e,t,n){var o=t(e);return be(e)?o:rs(o,n(e))}function as(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var a=e[n];t(a,n,e)&&(s[r++]=a)}return s}function ls(){return[]}var us=Object.prototype,cs=us.propertyIsEnumerable,qn=Object.getOwnPropertySymbols,ds=qn?function(e){return e==null?[]:(e=Object(e),as(qn(e),function(t){return cs.call(e,t)}))}:ls,fs=ds;function hs(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}function Re(e){return e!=null&&typeof e=="object"}var vs="[object Arguments]";function Hn(e){return Re(e)&&Ve(e)==vs}var Wn=Object.prototype,ps=Wn.hasOwnProperty,gs=Wn.propertyIsEnumerable,ms=Hn(function(){return arguments}())?Hn:function(e){return Re(e)&&ps.call(e,"callee")&&!gs.call(e,"callee")},Tt=ms;function ys(){return!1}var Un=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gn=Un&&typeof module=="object"&&module&&!module.nodeType&&module,bs=Gn&&Gn.exports===Un,Vn=bs?ye.Buffer:void 0,ws=Vn?Vn.isBuffer:void 0,xs=ws||ys,At=xs,Ps=9007199254740991,Es=/^(?:0|[1-9]\d*)$/;function Jt(e,t){var n=typeof e;return t=t==null?Ps:t,!!t&&(n=="number"||n!="symbol"&&Es.test(e))&&e>-1&&e%1==0&&e<t}var Ss=9007199254740991;function en(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ss}var Os="[object Arguments]",Ms="[object Array]",_s="[object Boolean]",Ts="[object Date]",As="[object Error]",Cs="[object Function]",ks="[object Map]",$s="[object Number]",Is="[object Object]",zs="[object RegExp]",Ns="[object Set]",Zs="[object String]",Ds="[object WeakMap]",js="[object ArrayBuffer]",Ls="[object DataView]",Bs="[object Float32Array]",Rs="[object Float64Array]",qs="[object Int8Array]",Hs="[object Int16Array]",Ws="[object Int32Array]",Us="[object Uint8Array]",Gs="[object Uint8ClampedArray]",Vs="[object Uint16Array]",Fs="[object Uint32Array]",Y={};Y[Bs]=Y[Rs]=Y[qs]=Y[Hs]=Y[Ws]=Y[Us]=Y[Gs]=Y[Vs]=Y[Fs]=!0;Y[Os]=Y[Ms]=Y[js]=Y[_s]=Y[Ls]=Y[Ts]=Y[As]=Y[Cs]=Y[ks]=Y[$s]=Y[Is]=Y[zs]=Y[Ns]=Y[Zs]=Y[Ds]=!1;function Xs(e){return Re(e)&&en(e.length)&&!!Y[Ve(e)]}function Ys(e){return function(t){return e(t)}}var Fn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ft=Fn&&typeof module=="object"&&module&&!module.nodeType&&module,Ks=ft&&ft.exports===Fn,tn=Ks&&Zn.process,Qs=function(){try{var e=ft&&ft.require&&ft.require("util").types;return e||tn&&tn.binding&&tn.binding("util")}catch{}}(),Xn=Qs,Yn=Xn&&Xn.isTypedArray,Js=Yn?Ys(Yn):Xs,nn=Js,ea=Object.prototype,ta=ea.hasOwnProperty;function Kn(e,t){var n=be(e),o=!n&&Tt(e),r=!n&&!o&&At(e),s=!n&&!o&&!r&&nn(e),a=n||o||r||s,i=a?hs(e.length,String):[],u=i.length;for(var c in e)(t||ta.call(e,c))&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Jt(c,u)))&&i.push(c);return i}var na=Object.prototype;function on(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||na;return e===n}function Qn(e,t){return function(n){return e(t(n))}}var oa=Qn(Object.keys,Object),ra=oa,ia=Object.prototype,sa=ia.hasOwnProperty;function aa(e){if(!on(e))return ra(e);var t=[];for(var n in Object(e))sa.call(e,n)&&n!="constructor"&&t.push(n);return t}function Ct(e){return e!=null&&en(e.length)&&!Yt(e)}function Jn(e){return Ct(e)?Kn(e):aa(e)}function eo(e){return ss(e,Jn,fs)}var la=1,ua=Object.prototype,ca=ua.hasOwnProperty;function da(e,t,n,o,r,s){var a=n&la,i=eo(e),u=i.length,c=eo(t),l=c.length;if(u!=l&&!a)return!1;for(var f=u;f--;){var m=i[f];if(!(a?m in t:ca.call(t,m)))return!1}var x=s.get(e),g=s.get(t);if(x&&g)return x==t&&g==e;var h=!0;s.set(e,t),s.set(t,e);for(var w=a;++f<u;){m=i[f];var p=e[m],v=t[m];if(o)var y=a?o(v,p,m,t,e,s):o(p,v,m,e,t,s);if(!(y===void 0?p===v||r(p,v,n,o,s):y)){h=!1;break}w||(w=m=="constructor")}if(h&&!w){var _=e.constructor,k=t.constructor;_!=k&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof k=="function"&&k instanceof k)&&(h=!1)}return s.delete(e),s.delete(t),h}var fa=Xe(ye,"DataView"),rn=fa,ha=Xe(ye,"Promise"),sn=ha,va=Xe(ye,"Set"),an=va,pa=Xe(ye,"WeakMap"),ln=pa,to="[object Map]",ga="[object Object]",no="[object Promise]",oo="[object Set]",ro="[object WeakMap]",io="[object DataView]",ma=Fe(rn),ya=Fe(ct),ba=Fe(sn),wa=Fe(an),xa=Fe(ln),Ke=Ve;(rn&&Ke(new rn(new ArrayBuffer(1)))!=io||ct&&Ke(new ct)!=to||sn&&Ke(sn.resolve())!=no||an&&Ke(new an)!=oo||ln&&Ke(new ln)!=ro)&&(Ke=function(e){var t=Ve(e),n=t==ga?e.constructor:void 0,o=n?Fe(n):"";if(o)switch(o){case ma:return io;case ya:return to;case ba:return no;case wa:return oo;case xa:return ro}return t});var so=Ke,Pa=1,ao="[object Arguments]",lo="[object Array]",kt="[object Object]",Ea=Object.prototype,uo=Ea.hasOwnProperty;function Sa(e,t,n,o,r,s){var a=be(e),i=be(t),u=a?lo:so(e),c=i?lo:so(t);u=u==ao?kt:u,c=c==ao?kt:c;var l=u==kt,f=c==kt,m=u==c;if(m&&At(e)){if(!At(t))return!1;a=!0,l=!1}if(m&&!l)return s||(s=new _e),a||nn(e)?Bn(e,t,n,o,r,s):os(e,t,u,n,o,r,s);if(!(n&Pa)){var x=l&&uo.call(e,"__wrapped__"),g=f&&uo.call(t,"__wrapped__");if(x||g){var h=x?e.value():e,w=g?t.value():t;return s||(s=new _e),r(h,w,n,o,s)}}return m?(s||(s=new _e),da(e,t,n,o,r,s)):!1}function $t(e,t,n,o,r){return e===t?!0:e==null||t==null||!Re(e)&&!Re(t)?e!==e&&t!==t:Sa(e,t,n,o,$t,r)}function Qe(e,t){return $t(e,t)}function tt(e){return mr(e)?e:Ae(e)}function se(e,t="Parameter"){if(e==null)throw new Error(`${t} is null`);return e}function Oa(e,t,n,o){if(o){const s=q(o(e[t])),a=i=>{Qe(i,s.value)||(s.value=i),Qe(i,e[t])||n(`update:${t}`,i)};return X(()=>o(s.value),a),X(()=>e[t],i=>a(o(i))),s.value!==e[t]&&n(`update:${t}`,s.value),s}const r=q(e[t]);return X(()=>e[t],s=>{Qe(s,r.value)||(r.value=s)}),X(r,s=>{Qe(s,e[t])||n(`update:${t}`,s)}),r}function co(e,t,n,o){const r=Ae(new Set);return X(()=>e[t],()=>{const a=e[t].filter(i=>i in n);Qe(a,r)||(r.clear(),a.forEach(r.add,r))},{immediate:!0}),X(r,()=>{const s=Array.from(r);Qe(e[t],s)||o(`update:${t}`,s)}),tt(r)}const fo=Symbol("containers");function Ma(e){Ue(fo,e)}function ho(){const e=se(et(fo),"containers");return{container:e.container,svg:e.svg,viewport:e.viewport,svgPanZoom:e.svgPanZoom}}class D{static value(t,n){return t instanceof Function?t(n):t}static values(t,n){return Object.values(t).filter(o=>o instanceof Function).length===0?t:Object.fromEntries(Object.entries(t).map(([o,r])=>[o,r instanceof Function?r(n):r]))}}var j;(function(e){e[e.CENTER=0]="CENTER",e[e.NORTH=1]="NORTH",e[e.NORTH_EAST=2]="NORTH_EAST",e[e.EAST=3]="EAST",e[e.SOUTH_EAST=4]="SOUTH_EAST",e[e.SOUTH=5]="SOUTH",e[e.SOUTH_WEST=6]="SOUTH_WEST",e[e.WEST=7]="WEST",e[e.NORTH_WEST=8]="NORTH_WEST"})(j||(j={}));function vo(e){const t={};return Object.assign(t,e(t))}function cd(e){return e}function we(e){return Object.entries(e)}function un(e,t){const n=new Set(Object.keys(e));we(t).forEach(([o,r])=>{Qe(e[o],r)||(e[o]=r),n.delete(o)}),n.forEach(o=>delete e[o])}function po(e,t,n){const o=D.values(t.normal,e);return o.type=="circle"?{width:o.radius*2*n,height:o.radius*2*n}:{width:o.width*n,height:o.height*n}}function _a(e,t,n,o){const s=Math.abs(e.x-n.x)<t.width/2+o.width/2,i=Math.abs(e.y-n.y)<t.height/2+o.height/2;return s&&i}function It(e,t){let n=0;return t===1||e===void 0||e==="none"?n=e!=null?e:0:typeof e=="string"?n=e.split(/\s+/).map(o=>parseInt(o)*t).filter(o=>!isNaN(o)).join(" "):n=e*t,n&&n!=="0"?n:void 0}function cn(e){let t=0;if(e===void 0||e==="none")t=0;else if(typeof e=="string"){const n=e.split(/\s+/).map(o=>parseInt(o)).filter(o=>!isNaN(o));n.length%2==0?t=n.reduce((o,r)=>o+r,0):t=n.reduce((o,r)=>o+r,0)*2}else t=e*2;return t}class zt{static valueOf(t){return Array.from(t.values())}}function Nt(...e){return e.find(t=>!!t)}function Ta(e){return typeof btoa===void 0?Buffer.from(e).toString("base64").replaceAll("=",""):btoa(e).replaceAll("=","")}function Aa(e,t,n){var o;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const s=r.matrixTransform((o=t.getCTM())==null?void 0:o.inverse());return{x:s.x,y:s.y}}function Ca(e,t,n){const o=e.createSVGPoint();o.x=n.x,o.y=n.y;const r=o.matrixTransform(t.getCTM());return{x:r.x,y:r.y}}var ka=/\s/;function $a(e){for(var t=e.length;t--&&ka.test(e.charAt(t)););return t}var Ia=/^\s+/;function za(e){return e&&e.slice(0,$a(e)+1).replace(Ia,"")}var Na="[object Symbol]";function ht(e){return typeof e=="symbol"||Re(e)&&Ve(e)==Na}var go=0/0,Za=/^[-+]0x[0-9a-f]+$/i,Da=/^0b[01]+$/i,ja=/^0o[0-7]+$/i,La=parseInt;function mo(e){if(typeof e=="number")return e;if(ht(e))return go;if(Me(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Me(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=za(e);var n=Da.test(e);return n||ja.test(e)?La(e.slice(2),n?2:8):Za.test(e)?go:+e}var yo=1/0,Ba=17976931348623157e292;function Ra(e){if(!e)return e===0?e:0;if(e=mo(e),e===yo||e===-yo){var t=e<0?-1:1;return t*Ba}return e===e?e:0}function bo(e){var t=Ra(e),n=t%1;return t===t?n?t-n:t:0}function qa(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}var Ha=1/0,wo=Be?Be.prototype:void 0,xo=wo?wo.toString:void 0;function Po(e){if(typeof e=="string")return e;if(be(e))return qa(e,Po)+"";if(ht(e))return xo?xo.call(e):"";var t=e+"";return t=="0"&&1/e==-Ha?"-0":t}function dn(e){return e==null?"":Po(e)}var Wa=ye.isFinite,Ua=Math.min;function Ga(e){var t=Math[e];return function(n,o){if(n=mo(n),o=o==null?0:Ua(bo(o),292),o&&Wa(n)){var r=(dn(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+o));return r=(dn(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var Va=Ga("round"),Eo=Va;const So=20;class Oo{activate(t){const{layouts:n,nodes:o,configs:r,emitter:s,scale:a,svgPanZoom:i}=t,u=f=>{for(const[m,x]of Object.entries(f)){const g=this.getOrCreateNodePosition(n,m);this.setNodePosition(g,x)}},c=f=>{const m=f.filter(h=>!(h in n)),x=i.getViewArea(),g=a.value;for(const h of m){const w=o[h],p=po(w,r.node,g),v=$e({},x.center);for(;;){let _=!1;for(const[k,E]of Object.entries(n)){if(h===k)continue;const T=o[k];if(!T)continue;const I=po(T,r.node,g);if(_=_a(v,p,E,I),_)break}if(_)v.x+=p.width+So*g,v.x+p.width/2>x.box.right&&(v.x=x.center.x,v.y+=p.height+So*g);else break}const y=this.getOrCreateNodePosition(n,h);this.setNodePosition(y,v)}};c(Object.keys(o));const l=X(()=>Object.keys(o),c);s.on("node:dragstart",u),s.on("node:pointermove",u),s.on("node:dragend",u),this.onDeactivate=()=>{l(),s.off("node:dragstart",u),s.off("node:pointermove",u),s.off("node:dragend",u)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(t,n){t.value.x=Eo(n.x,3),t.value.y=Eo(n.y,3)}getOrCreateNodePosition(t,n){const o=Gt(t,n);return o.value||(o.value={x:0,y:0}),o}}var Fa=function(){try{var e=Xe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Zt=Fa;function fn(e,t,n){t=="__proto__"&&Zt?Zt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function hn(e,t,n){(n!==void 0&&!lt(e[t],n)||n===void 0&&!(t in e))&&fn(e,t,n)}function Xa(e){return function(t,n,o){for(var r=-1,s=Object(t),a=o(t),i=a.length;i--;){var u=a[e?i:++r];if(n(s[u],u,s)===!1)break}return t}}var Ya=Xa(),Ka=Ya,Mo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_o=Mo&&typeof module=="object"&&module&&!module.nodeType&&module,Qa=_o&&_o.exports===Mo,To=Qa?ye.Buffer:void 0,Ao=To?To.allocUnsafe:void 0;function Ja(e,t){if(t)return e.slice();var n=e.length,o=Ao?Ao(n):new e.constructor(n);return e.copy(o),o}function el(e){var t=new e.constructor(e.byteLength);return new _t(t).set(new _t(e)),t}function tl(e,t){var n=t?el(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function nl(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}var Co=Object.create,ol=function(){function e(){}return function(t){if(!Me(t))return{};if(Co)return Co(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),rl=ol,il=Qn(Object.getPrototypeOf,Object),ko=il;function sl(e){return typeof e.constructor=="function"&&!on(e)?rl(ko(e)):{}}function al(e){return Re(e)&&Ct(e)}var ll="[object Object]",ul=Function.prototype,cl=Object.prototype,$o=ul.toString,dl=cl.hasOwnProperty,fl=$o.call(Object);function hl(e){if(!Re(e)||Ve(e)!=ll)return!1;var t=ko(e);if(t===null)return!0;var n=dl.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&$o.call(n)==fl}function vn(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var vl=Object.prototype,pl=vl.hasOwnProperty;function gl(e,t,n){var o=e[t];(!(pl.call(e,t)&&lt(o,n))||n===void 0&&!(t in e))&&fn(e,t,n)}function ml(e,t,n,o){var r=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var i=t[s],u=o?o(n[i],e[i],i,n,e):void 0;u===void 0&&(u=e[i]),r?fn(n,i,u):gl(n,i,u)}return n}function yl(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var bl=Object.prototype,wl=bl.hasOwnProperty;function xl(e){if(!Me(e))return yl(e);var t=on(e),n=[];for(var o in e)o=="constructor"&&(t||!wl.call(e,o))||n.push(o);return n}function Io(e){return Ct(e)?Kn(e,!0):xl(e)}function Pl(e){return ml(e,Io(e))}function El(e,t,n,o,r,s,a){var i=vn(e,n),u=vn(t,n),c=a.get(u);if(c){hn(e,n,c);return}var l=s?s(i,u,n+"",e,t,a):void 0,f=l===void 0;if(f){var m=be(u),x=!m&&At(u),g=!m&&!x&&nn(u);l=u,m||x||g?be(i)?l=i:al(i)?l=nl(i):x?(f=!1,l=Ja(u,!0)):g?(f=!1,l=tl(u,!0)):l=[]:hl(u)||Tt(u)?(l=i,Tt(i)?l=Pl(i):(!Me(i)||Yt(i))&&(l=sl(u))):f=!1}f&&(a.set(u,l),r(l,u,o,s,a),a.delete(u)),hn(e,n,l)}function zo(e,t,n,o,r){e!==t&&Ka(t,function(s,a){if(r||(r=new _e),Me(s))El(e,t,a,n,zo,o,r);else{var i=o?o(vn(e,a),s,a+"",e,t,r):void 0;i===void 0&&(i=s),hn(e,a,i)}},Io)}function pn(e){return e}function Sl(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var No=Math.max;function Ol(e,t,n){return t=No(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=No(o.length-t,0),a=Array(s);++r<s;)a[r]=o[t+r];r=-1;for(var i=Array(t+1);++r<t;)i[r]=o[r];return i[t]=n(a),Sl(e,this,i)}}function Ml(e){return function(){return e}}var _l=Zt?function(e,t){return Zt(e,"toString",{configurable:!0,enumerable:!1,value:Ml(t),writable:!0})}:pn,Tl=_l,Al=800,Cl=16,kl=Date.now;function $l(e){var t=0,n=0;return function(){var o=kl(),r=Cl-(o-n);if(n=o,r>0){if(++t>=Al)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Il=$l(Tl),zl=Il;function Nl(e,t){return zl(Ol(e,t,pn),e+"")}function Zo(e,t,n){if(!Me(n))return!1;var o=typeof t;return(o=="number"?Ct(n)&&Jt(t,n.length):o=="string"&&t in n)?lt(n[t],e):!1}function Zl(e){return Nl(function(t,n){var o=-1,r=n.length,s=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,a&&Zo(n[0],n[1],a)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var i=n[o];i&&e(t,i,o,s)}return t})}var Dl=Zl(function(e,t,n){zo(e,t,n)}),Do=Dl;function jo(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,fit:!1,layoutHandler:new Oo,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}}},node:vo(e=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:t=>D.value(e.normal.type,t),radius:t=>{var n;return((n=D.value(e.normal.radius,t))!=null?n:0)+2},width:t=>{var n;return((n=D.value(e.normal.width,t))!=null?n:0)+2},height:t=>{var n;return((n=D.value(e.normal.height,t))!=null?n:0)+2},borderRadius:t=>{var n;return(n=D.value(e.normal.borderRadius,t))!=null?n:0},strokeWidth:t=>D.value(e.normal.strokeWidth,t),strokeColor:t=>D.value(e.normal.strokeColor,t),strokeDasharray:t=>D.value(e.normal.strokeDasharray,t),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:j.SOUTH,text:"name"},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},transition:void 0})),edge:vo(e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>D.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>D.value(e.normal.dasharray,t),linecap:t=>D.value(e.normal.linecap,t),animate:t=>D.value(e.normal.animate,t),animationSpeed:t=>D.value(e.normal.animationSpeed,t)},selected:{width:t=>D.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=D.value(e.normal.width,t);return`${n*1.5} ${n*2}`},linecap:t=>D.value(e.normal.linecap,t),animate:t=>D.value(e.normal.animate,t),animationSpeed:t=>D.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null}},margin:null,summarize:(t,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4}})),path:{visible:!1,clickable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:{width:6,color:e=>{const t=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],n=e.edges.map(o=>o.split("").reduce((r,s)=>(r=(r<<5)-r+s.charCodeAt(0),r&r),0)).reduce((o,r)=>o+r,0);return t[Math.abs(n)%t.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50},transition:void 0}}}function dd(e){const t=jo();return e&&Do(t,e),t}const Lo=Symbol("style");function jl(e){const t=Ae(jo()),n=Object.keys(t);for(const o of n)X(()=>e[o],()=>{Do(t[o],e[o]||{})},{immediate:!0,deep:!0});return Ue(Lo,t),t}function Dt(e){return se(et(Lo),`Configs(${e})`)[e]}function Ll(){return Dt("view")}function Bo(){return Dt("node")}function jt(){return Dt("edge")}function Ro(){return Dt("path")}const Lt=Ae({}),vt={},Bl=Symbol("markers");function Rl(){return Ue(Bl,Lt),Lt}function ql(e,t,n){var o;return Xt($e({},e),{color:(o=e.color)!=null?o:n,isSource:t})}function Hl(e){const t=Ta(e.color);return`marker_${e.type}_${e.width}_${e.height}_${e.margin}_${t}_${e.isSource?"L":"R"}_${e.units==="strokeWidth"?"rel":"abs"}`}function Wl(e,t){var n;const o=(n=vt[e])!=null?n:0;vt[e]=o+1,o||(Lt[e]=t)}function Ul(e){var t;const n=(t=vt[e])!=null?t:0;n&&(n-1==0?(delete Lt[e],delete vt[e]):vt[e]=n-1)}function pt(e){e&&Ul(e)}function qo(e,t,n,o){if(e.type==="none"){pt(n);return}if(e.type==="custom")return pt(n),e.customId;const r=ql(e,t,o),s=Hl(r);return s===n||(pt(n),Wl(s,r)),s}function Gl(e,t,n){const o=tt({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return Oe(()=>{const{edgeLayoutPoints:r,edgeGroups:s}=Fl(n,e,t);un(o.edgeLayoutPoints,r),un(o.edgeGroups,s)}),Oe(()=>{const r={};for(const[s,{edges:a,groupWidth:i}]of Object.entries(o.edgeGroups)){let u=!1;if(i==0)u=!1;else if(n.edge.summarize instanceof Function){const c=n.edge.summarize(a,n);c===null?u=Ho(e,a,n,i):u=c}else n.edge.summarize?u=Ho(e,a,n,i):u=!1;o.edgeGroups[s].summarize=u,u&&Object.keys(a).forEach(c=>r[c]=!0)}un(o.summarizedEdges,r)}),o}function Vl(e,t,n,o,r,s){return e?t?Wo(e.edge,n,o,r,0,0,s):Wo(e.edge,n,o,r,e.groupWidth,e.pointInGroup,s):{x1:0,y1:0,x2:0,y2:0}}function Fl(e,t,n){const o={},r={},s={};for(const[i,u]of Object.entries(n)){if(!(u.source in t&&u.target in t))continue;const c=[u.source,u.target].sort().join("<=>"),l=s[c]||{};l[i]=u,s[c]=l}const a=e.edge.gap instanceof Function?e.edge.gap:(i,u)=>e.edge.gap;for(const[i,u]of Object.entries(s)){const c=Object.keys(u).length;if(c==0)continue;const l=a(u,e),[f,m]=Object.entries(u)[0];if(c===1)o[f]={edge:m,pointInGroup:0,groupWidth:0},r[i]={edges:u,groupWidth:0,summarize:!1};else{let x=0;const g=Object.values(u).map(p=>D.value(e.edge.normal.width,p)/2),h=Object.entries(u).map(([p,v],y)=>(y>0&&(x+=g[y-1]+l+g[y]),[p,v,x])),w=x;h.forEach(([p,v,y])=>{o[p]={edge:v,pointInGroup:y,groupWidth:w}}),r[i]={edges:u,groupWidth:w,summarize:!1}}}return{edgeLayoutPoints:o,edgeGroups:r}}function Ho(e,t,n,o){if(Object.entries(t).length===1)return!1;const s=Math.min(...Object.values(t).flatMap(a=>[e[a.source],e[a.target]]).filter(a=>a).map(a=>{const i=D.values(n.node.normal,a);return i.type==="circle"?i.radius*2:Math.min(i.width,i.height)}));return o>s}function Wo(e,t,n,o,r,s,a){var i,u,c,l,f,m,x,g;let h,w,p,v;return e.source<e.target?[h,w,p,v]=Uo((i=t==null?void 0:t.x)!=null?i:0,(u=t==null?void 0:t.y)!=null?u:0,(c=n==null?void 0:n.x)!=null?c:0,(l=n==null?void 0:n.y)!=null?l:0,o,r,s,a):[p,v,h,w]=Uo((f=n==null?void 0:n.x)!=null?f:0,(m=n==null?void 0:n.y)!=null?m:0,(x=t==null?void 0:t.x)!=null?x:0,(g=t==null?void 0:t.y)!=null?g:0,o,r,s,a),{x1:h,y1:w,x2:p,y2:v}}function Uo(e,t,n,o,r,s,a,i){const u=n-e,c=o-t;let l=(s/2-a)*r;if(l!==0&&i!=="clock"){const f=Math.atan2(o-t,n-e);if(i==="vertical"){const m=Math.PI/2;(f<-m||f>=m)&&(l*=-1)}else i==="horizontal"&&f<0&&(l*=-1)}if(u===0){const f=c<0?-1:1;return[e+l*f,t,n+l*f,o]}else if(c===0){const f=u<0?1:-1;return[e,t+l*f,n,o+l*f]}else{const f=c/u,m=-1/f;c<0&&(l=-l);const x=l/Math.sqrt(1+Math.pow(m,2));return[e+x,t+x*m,n+x,o+x*m]}}var Bt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Go={exports:{}};(function(e,t){e.exports=n;function n(i,u){if(!(this instanceof n))return new n(i,u);this.x=i||0,this.y=u||0}n.fromArray=function(i){return new n(i[0]||0,i[1]||0)},n.fromObject=function(i){return new n(i.x||0,i.y||0)},n.prototype.addX=function(i){return this.x+=i.x,this},n.prototype.addY=function(i){return this.y+=i.y,this},n.prototype.add=function(i){return this.x+=i.x,this.y+=i.y,this},n.prototype.addScalar=function(i){return this.x+=i,this.y+=i,this},n.prototype.addScalarX=function(i){return this.x+=i,this},n.prototype.addScalarY=function(i){return this.y+=i,this},n.prototype.subtractX=function(i){return this.x-=i.x,this},n.prototype.subtractY=function(i){return this.y-=i.y,this},n.prototype.subtract=function(i){return this.x-=i.x,this.y-=i.y,this},n.prototype.subtractScalar=function(i){return this.x-=i,this.y-=i,this},n.prototype.subtractScalarX=function(i){return this.x-=i,this},n.prototype.subtractScalarY=function(i){return this.y-=i,this},n.prototype.divideX=function(i){return this.x/=i.x,this},n.prototype.divideY=function(i){return this.y/=i.y,this},n.prototype.divide=function(i){return this.x/=i.x,this.y/=i.y,this},n.prototype.divideScalar=function(i){return i!==0?(this.x/=i,this.y/=i):(this.x=0,this.y=0),this},n.prototype.divideScalarX=function(i){return i!==0?this.x/=i:this.x=0,this},n.prototype.divideScalarY=function(i){return i!==0?this.y/=i:this.y=0,this},n.prototype.invertX=function(){return this.x*=-1,this},n.prototype.invertY=function(){return this.y*=-1,this},n.prototype.invert=function(){return this.invertX(),this.invertY(),this},n.prototype.multiplyX=function(i){return this.x*=i.x,this},n.prototype.multiplyY=function(i){return this.y*=i.y,this},n.prototype.multiply=function(i){return this.x*=i.x,this.y*=i.y,this},n.prototype.multiplyScalar=function(i){return this.x*=i,this.y*=i,this},n.prototype.multiplyScalarX=function(i){return this.x*=i,this},n.prototype.multiplyScalarY=function(i){return this.y*=i,this},n.prototype.normalize=function(){var i=this.length();return i===0?(this.x=1,this.y=0):this.divide(n(i,i)),this},n.prototype.norm=n.prototype.normalize,n.prototype.limit=function(i,u){return Math.abs(this.x)>i&&(this.x*=u),Math.abs(this.y)>i&&(this.y*=u),this},n.prototype.randomize=function(i,u){return this.randomizeX(i,u),this.randomizeY(i,u),this},n.prototype.randomizeX=function(i,u){var c=Math.min(i.x,u.x),l=Math.max(i.x,u.x);return this.x=r(c,l),this},n.prototype.randomizeY=function(i,u){var c=Math.min(i.y,u.y),l=Math.max(i.y,u.y);return this.y=r(c,l),this},n.prototype.randomizeAny=function(i,u){return Math.round(Math.random())?this.randomizeX(i,u):this.randomizeY(i,u),this},n.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},n.prototype.toFixed=function(i){return typeof i=="undefined"&&(i=8),this.x=this.x.toFixed(i),this.y=this.y.toFixed(i),this},n.prototype.mixX=function(i,u){return typeof u=="undefined"&&(u=.5),this.x=(1-u)*this.x+u*i.x,this},n.prototype.mixY=function(i,u){return typeof u=="undefined"&&(u=.5),this.y=(1-u)*this.y+u*i.y,this},n.prototype.mix=function(i,u){return this.mixX(i,u),this.mixY(i,u),this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyX=function(i){return this.x=i.x,this},n.prototype.copyY=function(i){return this.y=i.y,this},n.prototype.copy=function(i){return this.copyX(i),this.copyY(i),this},n.prototype.zero=function(){return this.x=this.y=0,this},n.prototype.dot=function(i){return this.x*i.x+this.y*i.y},n.prototype.cross=function(i){return this.x*i.y-this.y*i.x},n.prototype.projectOnto=function(i){var u=(this.x*i.x+this.y*i.y)/(i.x*i.x+i.y*i.y);return this.x=u*i.x,this.y=u*i.y,this},n.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},n.prototype.horizontalAngleDeg=function(){return s(this.horizontalAngle())},n.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},n.prototype.verticalAngleDeg=function(){return s(this.verticalAngle())},n.prototype.angle=n.prototype.horizontalAngle,n.prototype.angleDeg=n.prototype.horizontalAngleDeg,n.prototype.direction=n.prototype.horizontalAngle,n.prototype.rotate=function(i){var u=this.x*Math.cos(i)-this.y*Math.sin(i),c=this.x*Math.sin(i)+this.y*Math.cos(i);return this.x=u,this.y=c,this},n.prototype.rotateDeg=function(i){return i=a(i),this.rotate(i)},n.prototype.rotateTo=function(i){return this.rotate(i-this.angle())},n.prototype.rotateToDeg=function(i){return i=a(i),this.rotateTo(i)},n.prototype.rotateBy=function(i){var u=this.angle()+i;return this.rotate(u)},n.prototype.rotateByDeg=function(i){return i=a(i),this.rotateBy(i)},n.prototype.distanceX=function(i){return this.x-i.x},n.prototype.absDistanceX=function(i){return Math.abs(this.distanceX(i))},n.prototype.distanceY=function(i){return this.y-i.y},n.prototype.absDistanceY=function(i){return Math.abs(this.distanceY(i))},n.prototype.distance=function(i){return Math.sqrt(this.distanceSq(i))},n.prototype.distanceSq=function(i){var u=this.distanceX(i),c=this.distanceY(i);return u*u+c*c},n.prototype.length=function(){return Math.sqrt(this.lengthSq())},n.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},n.prototype.magnitude=n.prototype.length,n.prototype.isZero=function(){return this.x===0&&this.y===0},n.prototype.isEqualTo=function(i){return this.x===i.x&&this.y===i.y},n.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},n.prototype.toArray=function(){return[this.x,this.y]},n.prototype.toObject=function(){return{x:this.x,y:this.y}};var o=180/Math.PI;function r(i,u){return Math.floor(Math.random()*(u-i+1)+i)}function s(i){return i*o}function a(i){return i/o}})(Go);var H=Go.exports;function gt(e){const t=H.fromArray([e.x1,e.y1]),n=H.fromArray([e.x2,e.y2]);return{source:t,target:n,v:nt(t,n)}}function Rt(e,t){const n=H.fromObject(e),o=H.fromObject(t);return{source:n,target:o,v:nt(n,o)}}function ve(e,t){return{source:e,target:t,v:nt(e,t)}}function nt(e,t){return t.clone().subtract(e)}function Xl(e){return[H.fromArray([e.x1,e.y1]),H.fromArray([e.x2,e.y2])]}function Yl(e){return H.fromArray([(e.x1+e.x2)/2,(e.y1+e.y2)/2])}function gn(e,t){const n=t.v.clone().normalize(),o=t.source,r=e.clone().subtract(o),s=n.dot(r);return o.clone().add(n.multiplyScalar(s))}function mn(e,t,n,o){if(!(t.clone().subtract(n).lengthSq()-o*o<=Math.pow(1,-10)))return null;const i=ve(e,t),u=gn(n,i),l=u.clone().subtract(n).length();if(o<l)return null;if(o===l)return u;const f=Math.sqrt(me(o,2)-me(l,2)),m=i.v.normalize().multiplyScalar(f);return u.subtract(m)}function Kl(e,t,n,o,r){if(!(t.clone().subtract(n).lengthSq()-o*o<=Math.pow(1,-10)))return null;const u=ve(e,t),c=gn(n,u),f=c.clone().subtract(n).length();if(o<f)return null;if(o===f)return c;const m=Math.sqrt(me(o,2)-me(f,2)),x=u.v.normalize().multiplyScalar(m),g=c.clone().add(x),h=c.clone().subtract(x),w=xe(r,g),p=xe(r,h);return Math.abs(w-p)<2?h:w<p?g:h}function Je(e,t){const n=t.source,o=n.clone().subtract(e.source),r=e.v,s=t.v,a=o.cross(r)/r.cross(s);return n.clone().add(s.clone().multiplyScalar(a))}function Vo(e,t,n,o,r){const s=e,i=n.clone().subtract(s),u=i.magnitude(),c=t+o;if(c<u)return null;const l=Math.abs(t-o);if(u<l)return null;if(u===c){const I=i.clone().normalize();return e.clone().add(I.multiplyScalar(t))}if(u===l){const I=i.clone().normalize(),$=t>o;return e.clone().add(I.multiplyScalar($?t:-t))}const f=t,m=o,x=(me(u,2)+me(f,2)-me(m,2))/(2*u*f),g=f*x,h=Math.sqrt(me(f,2)-me(g,2)),w=i.clone().normalize(),p=H.fromArray([-w.y,w.x]),v=w.clone().multiplyScalar(g),y=p.clone().multiplyScalar(h),_=e.clone().add(v).add(y),k=e.clone().add(v).subtract(y),E=xe(_,r),T=xe(k,r);return E<T?_:k}function mt(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return ve(e.target,e.target.clone().add(t))}function ot(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function Ql(e,t,n){const o=e.x,r=e.y,s=t.x,a=t.y,i=n.x,u=n.y,c=o-s,l=r-a,f=i-s,m=u-a,x=(m*(c*(o+s)+l*(r+a))-l*(f*(i+s)+m*(u+a)))/(2*c*m-2*l*f),g=(-f*(c*(o+s)+l*(r+a))+c*(f*(i+s)+m*(u+a)))/(2*c*m-2*l*f),h=Math.sqrt(Math.pow(o-x,2)+Math.pow(r-g,2));return[H.fromArray([x,g]),h]}function xe(e,t){const n=t.x-e.x,o=t.y-e.y;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}function Jl(e,t,n){for(var o=-1,r=e.length;++o<r;){var s=e[o],a=t(s);if(a!=null&&(i===void 0?a===a&&!ht(a):n(a,i)))var i=a,u=s}return u}var eu=1,tu=2;function nu(e,t,n,o){var r=n.length,s=r,a=!o;if(e==null)return!s;for(e=Object(e);r--;){var i=n[r];if(a&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++r<s;){i=n[r];var u=i[0],c=e[u],l=i[1];if(a&&i[2]){if(c===void 0&&!(u in e))return!1}else{var f=new _e;if(o)var m=o(c,l,u,e,t,f);if(!(m===void 0?$t(l,c,eu|tu,o,f):m))return!1}}return!0}function Fo(e){return e===e&&!Me(e)}function ou(e){for(var t=Jn(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,Fo(r)]}return t}function Xo(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function ru(e){var t=ou(e);return t.length==1&&t[0][2]?Xo(t[0][0],t[0][1]):function(n){return n===e||nu(n,e,t)}}var iu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,su=/^\w*$/;function yn(e,t){if(be(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ht(e)?!0:su.test(e)||!iu.test(e)||t!=null&&e in Object(t)}var au="Expected a function";function bn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(au);var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var a=e.apply(this,o);return n.cache=s.set(r,a)||s,a};return n.cache=new(bn.Cache||ze),n}bn.Cache=ze;var lu=500;function uu(e){var t=bn(e,function(o){return n.size===lu&&n.clear(),o}),n=t.cache;return t}var cu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,du=/\\(\\)?/g,fu=uu(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(cu,function(n,o,r,s){t.push(r?s.replace(du,"$1"):o||n)}),t}),hu=fu;function Yo(e,t){return be(e)?e:yn(e,t)?[e]:hu(dn(e))}var vu=1/0;function qt(e){if(typeof e=="string"||ht(e))return e;var t=e+"";return t=="0"&&1/e==-vu?"-0":t}function Ko(e,t){t=Yo(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[qt(t[n++])];return n&&n==o?e:void 0}function pu(e,t,n){var o=e==null?void 0:Ko(e,t);return o===void 0?n:o}function gu(e,t){return e!=null&&t in Object(e)}function mu(e,t,n){t=Yo(t,e);for(var o=-1,r=t.length,s=!1;++o<r;){var a=qt(t[o]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++o!=r?s:(r=e==null?0:e.length,!!r&&en(r)&&Jt(a,r)&&(be(e)||Tt(e)))}function yu(e,t){return e!=null&&mu(e,t,gu)}var bu=1,wu=2;function xu(e,t){return yn(e)&&Fo(t)?Xo(qt(e),t):function(n){var o=pu(n,e);return o===void 0&&o===t?yu(n,e):$t(t,o,bu|wu)}}function Pu(e){return function(t){return t==null?void 0:t[e]}}function Eu(e){return function(t){return Ko(t,e)}}function Su(e){return yn(e)?Pu(qt(e)):Eu(e)}function Ou(e){return typeof e=="function"?e:e==null?pn:typeof e=="object"?be(e)?xu(e[0],e[1]):ru(e):Su(e)}function Mu(e,t){return e<t}function _u(e,t){return e&&e.length?Jl(e,Ou(t),Mu):void 0}function wn(e,t){return{x1:e.x,y1:e.y,x2:t.x,y2:t.y}}function Qo(e,t,n,o){var r;const s=Rt(e,t),a=t.x-n.width/2*o,i=t.y-n.height/2*o,u=t.x+n.width/2*o,c=t.y+n.height/2*o,l=[],f=n.borderRadius*o;if(f==0)l.push(H.fromArray([a,i]),H.fromArray([a,c]),H.fromArray([u,i]),H.fromArray([u,c]));else{const g=f*Math.sin(Math.PI/4);l.push(H.fromArray([a+f,i]),H.fromArray([a,i+f]),H.fromArray([a+f-g,i+f-g]),H.fromArray([a+f,c]),H.fromArray([a,c-f]),H.fromArray([a+f-g,c-f+g]),H.fromArray([u-f,i]),H.fromArray([u,i+f]),H.fromArray([u-f+g,i+f-g]),H.fromArray([u-f,c]),H.fromArray([u,c-f]),H.fromArray([u-f+g,c-f+g]))}const m=l.map(g=>gn(g,s)),x=(r=_u(m,g=>nt(s.source,g).lengthSq()))!=null?r:s.target;return nt(x,s.target).length()}function Jo(e,t,n,o,r){const s=gt(e),a=s.v.clone().normalize(),i=o===0?s.source:s.source.clone().add(a.clone().multiplyScalar(o*r)),u=o===0?s.target:s.target.clone().subtract(a.clone().multiplyScalar(o*r)),c=(t.width/2+n)*r,l=H.fromArray([-a.y,a.x]).multiplyScalar(c);let f=i.clone().subtract(l).toObject(),m=i.clone().add(l).toObject(),x=u.clone().subtract(l).toObject(),g=u.clone().add(l).toObject();const h=s.v.angleDeg();return(h<-90||h>=90)&&([f,m]=[m,f],[x,g]=[g,x]),{source:{above:f,below:m},target:{above:x,below:g}}}function Tu(e,t,n,o){let r;n.type==="circle"?r=n.radius:r=Qo(t,e,n,1);let s;return o.type==="circle"?s=o.radius:s=Qo(e,t,o,1),[r,s]}function xn(e,t,n){const o=gt(e);return Au(o,t,n)}function Au(e,t,n){const o=e.v.clone().normalize();e.v.angle();const r=e.source.clone().add(o.clone().multiplyScalar(t)),s=e.target.clone().subtract(o.clone().multiplyScalar(n));let[a,i]=r.toArray(),[u,c]=s.toArray();const l=nt(r,s);if(e.v.angle()*l.angle()<0){const f=H.fromArray([(a+u)/2,(i+c)/2]),m=f.clone().add(o.multiplyScalar(.5));[a,i]=f.toArray(),[u,c]=m.toArray()}return{x1:a,y1:i,x2:u,y2:c}}function rt(e,t,n){const{x:o,y:r}=e,s=o-t.x,a=r-t.y;return{x:s*Math.cos(n)-a*Math.sin(n)+t.x,y:s*Math.sin(n)+a*Math.cos(n)+t.y}}function Pn(e){return e>0?-(Math.PI*2-e):Math.PI*2+e}function Cu(e){return{x1:e.x2,y1:e.y2,x2:e.x1,y2:e.y1}}function En(e,t,n,o){const r=[],s=ve(t,e),a=ve(t,n);let i=ot(s,a);o*i<0&&(i=Pn(i));const u=H.fromObject(rt(e,t,-i/2)),c=ve(t,u),l=mt(c),f=ot(s,c);let m=mt(s);if(Math.abs(f)<Math.PI/2){const g=Je(m,l);r.push(g)}else{const g=H.fromObject(rt(u,t,f/2)),h=mt(ve(t,H.fromObject(g))),w=Je(m,h),p=Je(h,l);r.push(w,g,p)}r.push(u);const x=ot(a,c);if(m=mt(a),Math.abs(x)<Math.PI/2){const g=Je(m,l);r.push(g)}else{const g=H.fromObject(rt(u,t,x/2)),h=mt(ve(t,H.fromObject(g))),w=Je(l,h),p=Je(h,m);r.push(w,g,p)}return r}const er=Symbol("states"),ku={type:"none",width:0,height:0,margin:0,units:"strokeWidth",color:null};function $u(e,t,n,o,r,s,a,i,u){const c=Ae({}),l=Ae({}),f=Ae({});Object.keys(e).forEach(g=>{nr(c,e,g,n.has(g),!1,a.node)}),X(()=>[...n],(g,h)=>{const w=g.filter(v=>!h.includes(v)),p=h.filter(v=>!g.includes(v));w.forEach(v=>{const y=c[v];y&&!y.selected&&(y.selected=!0)}),p.forEach(v=>{const y=c[v];y&&y.selected&&(y.selected=!1)})}),X(()=>[...r],(g,h)=>{const w=g.filter(v=>!h.includes(v)),p=h.filter(v=>!g.includes(v));w.forEach(v=>{const y=c[v];y&&!y.hovered&&(y.hovered=!0)}),p.forEach(v=>{const y=c[v];y&&y.hovered&&(y.hovered=!1)})}),X(()=>new Set(Object.keys(e)),(g,h)=>{for(const p of g)h.has(p)||nr(c,e,p,!1,!1,a.node);const w=i.nodes;for(const p of h)g.has(p)||(delete w[p],n.delete(p),r.delete(p),delete c[p])});const m=Gl(e,t,a);Object.keys(t).forEach(g=>{rr(l,m,c,t,g,o.has(g),a.edge,i.nodes,u)}),X(m.edgeGroups,g=>Zu(f,m,a),{immediate:!0}),X(()=>[...o],(g,h)=>{const w=g.filter(v=>!h.includes(v)),p=h.filter(v=>!g.includes(v));w.forEach(v=>{const y=l[v];y&&!y.selected&&(y.selected=!0)}),p.forEach(v=>{const y=l[v];y&&y.selected&&(y.selected=!1)})}),X(()=>[...s],(g,h)=>{const w=g.filter(v=>!h.includes(v)),p=h.filter(v=>!g.includes(v));w.forEach(v=>{const y=l[v];y&&!y.hovered&&(y.hovered=!0)}),p.forEach(v=>{const y=l[v];y&&y.hovered&&(y.hovered=!1)})}),X(()=>new Set(Object.keys(t)),(g,h)=>{for(const w of g)h.has(w)||rr(l,m,c,t,w,!1,a.edge,i.nodes,u);for(const w of h)g.has(w)||(o.delete(w),s.delete(w),l[w].stopWatchHandle(),delete l[w])});const x={nodeStates:c,edgeStates:l,edgeGroupStates:m,summarizedEdgeStates:f,layouts:i};return Ue(er,x),x}function yt(){return se(et(er),"states")}function Iu(e,t,n,o){return n&&o.hover?D.values(o.hover,e):tr(e,t,o)}function tr(e,t,n){return t&&n.selected?D.values(n.selected,e):D.values(n.normal,e)}function zu(e,t,n,o){return t?D.values(o.selected,e):n&&o.hover?D.values(o.hover,e):D.values(o.normal,e)}function nr(e,t,n,o,r,s){e[n]={selected:o,hovered:r};const a=e[n];a.shape=A(()=>t[n]?Iu(t[n],a.selected,a.hovered,s):P(a.shape)),a.staticShape=A(()=>t[n]?tr(t[n],a.selected,s):P(a.staticShape)),a.label=A(()=>t[n]?D.values(s.label,t[n]):P(a.label)),a.labelText=A(()=>{var i,u;return s.label.text instanceof Function?P(a.label).text:t[n]?(u=(i=t[n])==null?void 0:i[P(a.label).text])!=null?u:"":P(a.labelText)}),a.draggable=A(()=>t[n]?D.value(s.draggable,t[n]):P(a.draggable)),a.selectable=A(()=>t[n]?D.value(s.selectable,t[n]):P(a.selectable))}function or(e){return e.type==="none"?ku:e}function rr(e,t,n,o,r,s,a,i,u){if(!o[r])return;e[r]={line:void 0,selectable:!1,selected:s,hovered:!1,curve:void 0,origin:{x1:0,y1:0,x2:0,y2:0},labelPosition:{x1:0,y1:0,x2:0,y2:0},position:{x1:0,y1:0,x2:0,y2:0},stopWatchHandle:()=>{}};const l=e[r],f=A(()=>{const w=o[r],p=zu(w,l.selected,l.hovered,a),v=D.value(a.normal.width,w),y=or(D.values(a.marker.source,[w,p])),_=or(D.values(a.marker.target,[w,p]));return{stroke:p,normalWidth:v,source:y,target:_}});l.line=f,l.selectable=A(()=>D.value(a.selectable,o[r]));const m=Gt(t.edgeLayoutPoints,r),x=Gt(t.summarizedEdges,r),g=Oe(()=>{var w,p;const v=o[r];if(!v)return;const y=i[v==null?void 0:v.source],_=i[v==null?void 0:v.target],k=(w=n[v==null?void 0:v.source])==null?void 0:w.staticShape,E=(p=n[v==null?void 0:v.target])==null?void 0:p.staticShape;if(!y||!_||!k||!E)return;const T=Vl(m.value,x.value,y,_,u.value,a.keepOrder),[I,$]=Tu(y,_,k,E),N=u.value;l.labelPosition=xn(T,I*N,$*N);let R=0,Z=0;const L=f.value;if(L.source.type!=="none"){const K=L.source;R=K.margin+K.width,K.units==="strokeWidth"&&(R*=L.normalWidth)}if(L.target.type!=="none"){const K=L.target;Z=K.margin+K.width,K.units==="strokeWidth"&&(Z*=L.normalWidth)}if(a.margin===null||a.margin===void 0?(L.source.type!=="none"||L.target.type!=="none")&&(R+=I,Z+=$):(R+=a.margin+I,Z+=a.margin+$),a.type==="straight")l.origin=T,l.curve=void 0,R===0&&Z===0?l.position=l.origin:l.position=xn(l.origin,R*N,Z*N);else{l.origin=wn(y,_);const K=m.value.groupWidth/2-m.value.pointInGroup,[te,J]=Nu(l.origin,T,K,R*N,Z*N);l.position=te,l.curve=J}}),h=Oe(()=>{!o[r]||(l.sourceMarkerId=qo(f.value.source,!0,l.sourceMarkerId,f.value.stroke.color),l.targetMarkerId=qo(f.value.target,!1,l.targetMarkerId,f.value.stroke.color))});e[r].stopWatchHandle=()=>{g(),h(),pt(l.sourceMarkerId),pt(l.targetMarkerId)}}function Nu(e,t,n,o,r){const s=gt(e),a=gt(t),i=Yl(t),[u,c]=Ql(s.source,s.target,i);let l,f;if(n===0)return o===0&&r===0?l=e:l=xn(e,o,r),[l,f];const m=ve(u,i),x=ot(ve(u,s.source),m);if(o===0&&r===0)l=e;else{let p=o/c,v=r/c;x>0&&(p*=-1,v*=-1),l=wn(rt(s.source,u,p),rt(s.target,u,-v));let y=ot(ve(u,s.source),ve(u,s.target)),_=ot(Rt(u,{x:l.x1,y:l.y1}),Rt(u,{x:l.x2,y:l.y2}));if(x*y<0&&(y=Pn(y),x*_<0&&(_=Pn(_))),y*_<0){const k=i.clone().add(a.v.normalize().multiplyScalar(.5));return l=wn(i,k),[l,f]}}const[g,h]=Xl(l),w=En(g,u,h,x).map(p=>p.toObject());return f={center:i,theta:x,circle:{center:u,radius:c},control:w},[l,f]}function Zu(e,t,n){const o=t.edgeGroups;Object.entries(o).filter(([r,s])=>s.summarize&&!(r in e)).forEach(([r,s])=>{const a={stroke:void 0};a.stroke=A(()=>D.values(n.edge.summarized.stroke,s.edges)),e[r]=a}),Object.keys(e).forEach(r=>{var s;((s=t.edgeGroups[r])==null?void 0:s.summarize)||delete e[r]})}const ir=Symbol("mouseEventHandlers"),bt=3;function Sn(e,t){var n;const o=(n=e[t])!=null?n:{x:0,y:0};return $e({},o)}function Pe(e,t){return e instanceof Array?{edges:e,event:t,summarized:!0}:{edge:e,edges:[e],event:t,summarized:!1}}function Du(e,t,n,o,r,s,a,i,u,c){at(()=>{var d,b;(d=e.value)==null||d.addEventListener("pointerdown",g,{passive:!0}),(b=e.value)==null||b.addEventListener("contextmenu",p,{passive:!1})}),wt(()=>{var d,b;(d=e.value)==null||d.removeEventListener("pointerdown",g),(b=e.value)==null||b.removeEventListener("contextmenu",p)});const l={container:{moveCounter:0,pointerCounter:0},nodePointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodes:i,hoveredNodesPre:new Set,hoveredEdges:u,edgePointers:new Map,edgePointerPeekCount:0},f={pointermove:h,pointerup:w,pointercancel:w},m={pointermove:k,pointerup:T,pointercancel:E},x={pointerup:L,pointercancel:ae};function g(d){l.container.moveCounter=0,l.container.pointerCounter===0&&we(f).forEach(([b,S])=>{var M;(M=e.value)==null||M.addEventListener(b,S,{passive:!0})}),l.container.pointerCounter++}function h(d){l.container.moveCounter++}function w(d){if(l.container.pointerCounter--,l.container.pointerCounter===0&&(we(f).forEach(([b,S])=>{var M;(M=e.value)==null||M.removeEventListener(b,S)}),l.container.moveCounter<=bt)){if(d.shiftKey&&(s.size>0||a.size>0))return;s.clear(),a.clear(),c.emit("view:click",{event:d})}}function p(d){c.emit("view:contextmenu",{event:d}),l.container.pointerCounter>0&&(l.container.pointerCounter=0,we(f).forEach(([b,S])=>{var M;(M=e.value)==null||M.removeEventListener(b,S)}))}function v(d){const b=l.follow.followedPointerId===d.pointerId,S=s.has(d.nodeId),M=!(d.pointerId in l.nodePointers);if(b&&M||b&&!S){const z=zt.valueOf(l.nodePointers).find(B=>s.has(B.nodeId));if(!z){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}d=z,l.follow.followedPointerId=d.pointerId}else{const z=l.nodePointers.get(l.follow.followedPointerId);if(!z){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}d=z}if(b||S){const z=zt.valueOf(l.nodePointers).map(B=>B.nodeId);l.follow.nodeBasePositions=Object.fromEntries(Array.from(s).filter(B=>!z.includes(B)).filter(B=>{var W;return(W=o[B])==null?void 0:W.draggable}).map(B=>[B,Sn(t,B)])),d.dragBasePosition=$e({},d.latestPosition),d.nodeBasePosition=Sn(t,d.nodeId)}}X(s,()=>{const d=l.nodePointers.get(l.follow.followedPointerId);d&&v(d)});function y(d,b){const S=d.dragBasePosition.x-b.pageX,M=d.dragBasePosition.y-b.pageY,z=l.follow.followedPointerId==d.pointerId?$e({[d.nodeId]:d.nodeBasePosition},l.follow.nodeBasePositions):{[d.nodeId]:d.nodeBasePosition},B=n.value;return Object.fromEntries(Object.entries(z).map(([W,ee])=>[W,{x:ee.x-S/B,y:ee.y-M/B}]))}function _(d,b){var S,M;if(b.shiftKey&&a.size>0)return;a.clear();const z=(M=(S=o[d])==null?void 0:S.selectable)!=null?M:!1;if(z){const B=zt.valueOf(l.nodePointers).filter(W=>W.pointerId!=b.pointerId&&s.has(W.nodeId)).length>0;b.shiftKey||B?s.has(d)?s.delete(d):typeof z=="number"&&s.size>=z||s.add(d):s.has(d)||(s.clear(),s.add(d))}c.emit("node:click",{node:d,event:b})}function k(d){var b;d.preventDefault(),d.stopPropagation();const S=l.nodePointers.get(d.pointerId);if(!S||(S.latestPosition={x:d.pageX,y:d.pageY},S.moveCounter++,S.moveCounter<=bt)||!((b=o[S.nodeId])==null?void 0:b.draggable))return;if(S.moveCounter===bt+1){const z=y(S,{pointerId:S.pointerId,pageX:S.dragBasePosition.x,pageY:S.dragBasePosition.y});c.emit("node:dragstart",z)}const M=y(S,d);c.emit("node:pointermove",M)}function E(d){d.preventDefault(),d.stopPropagation();let b=l.nodePointers.get(d.pointerId);if(!!b){for(b of l.nodePointers.values()){const S=b.nodeId;if(b.moveCounter>bt){const z=y(b,{pointerId:b.pointerId,pageX:b.latestPosition.x,pageY:b.latestPosition.y});c.emit("node:dragend",z)}c.emit("node:pointerup",{node:S,event:d})}l.nodePointers.clear(),l.follow={followedPointerId:-1,nodeBasePositions:{}},we(m).forEach(([S,M])=>{document.removeEventListener(S,M)}),c.emit("view:mode","default")}}function T(d){var b;d.preventDefault(),d.stopPropagation();const S=l.nodePointers.get(d.pointerId);if(!S)return;l.nodePointers.delete(d.pointerId);const M=S.nodeId;if(S.moveCounter>bt){if((b=o[S.nodeId])==null?void 0:b.draggable){const B=y(S,d);c.emit("node:dragend",B),c.emit("node:pointerup",{node:M,event:d})}}else c.emit("node:pointerup",{node:M,event:d}),_(M,d);l.nodePointers.size==0?(l.follow={followedPointerId:-1,nodeBasePositions:{}},we(m).forEach(([B,W])=>{document.removeEventListener(B,W)}),c.emit("view:mode","default")):v(S),l.hoveredNodes.clear(),l.hoveredNodesPre.forEach(l.hoveredNodes.add,l.hoveredNodes)}function I(d,b){if(b.button==2||(b.preventDefault(),b.stopPropagation(),l.edgePointers.size!==0))return;l.nodePointers.size==0&&(c.emit("view:mode","node"),we(m).forEach(([M,z])=>{document.addEventListener(M,z)}));const S={pointerId:b.pointerId,nodeId:d,moveCounter:0,nodeBasePosition:Sn(t,d),dragBasePosition:{x:b.pageX,y:b.pageY},latestPosition:{x:b.pageX,y:b.pageY}};l.nodePointers.set(b.pointerId,S),s.has(d)&&(l.follow.followedPointerId<0?(l.follow.followedPointerId=b.pointerId,v(S)):delete l.follow.nodeBasePositions[S.nodeId]),c.emit("node:pointerdown",{node:d,event:b})}function $(d,b){l.hoveredNodesPre.add(d),!(l.nodePointers.size>0)&&(l.hoveredNodes.add(d),c.emit("node:pointerover",{node:d,event:b}))}function N(d,b){l.hoveredNodesPre.delete(d),!(l.nodePointers.size>0)&&(l.hoveredNodes.delete(d),c.emit("node:pointerout",{node:d,event:b}))}function R(d,b){c.emit("node:contextmenu",{node:d,event:b})}function Z(d,b){if(b.button==2||(b.preventDefault(),b.stopPropagation(),l.nodePointers.size!==0))return;l.edgePointers.size==0&&(c.emit("view:mode","edge"),we(x).forEach(([M,z])=>{document.addEventListener(M,z)}),l.edgePointerPeekCount=0),l.edgePointerPeekCount++;const S={pointerId:b.pointerId,edgeId:d};l.edgePointers.set(b.pointerId,S),c.emit("edge:pointerdown",Pe(d,b))}function L(d){d.preventDefault(),d.stopPropagation();const b=l.edgePointers.get(d.pointerId);if(!b)return;l.edgePointers.delete(d.pointerId);const S=b.edgeId;c.emit("edge:pointerup",Pe(S,d)),(l.edgePointers.size>0||l.edgePointerPeekCount===1)&&K(S,d),l.edgePointers.size===0&&(l.edgePointerPeekCount=0,we(x).forEach(([M,z])=>{document.removeEventListener(M,z)}),c.emit("view:mode","default"))}function ae(d){if(d.preventDefault(),d.stopPropagation(),!!l.edgePointers.get(d.pointerId)){for(const S of l.edgePointers.values()){const M=S.edgeId;c.emit("edge:pointerup",Pe(M,d))}l.edgePointers.clear(),l.edgePointerPeekCount=0,we(x).forEach(([S,M])=>{document.removeEventListener(S,M)}),c.emit("view:mode","default")}}function K(d,b){var S;if(b.shiftKey&&s.size>0)return;s.clear();const M=d instanceof Array?d:[d],z=zt.valueOf(l.edgePointers).filter(B=>{const W=B.edgeId instanceof Array?B.edgeId:[B.edgeId];return B.pointerId!=b.pointerId&&W.every(ee=>a.has(ee))}).length>0;if(d instanceof Array)M.find(W=>{var ee;return(ee=r[W])==null?void 0:ee.selectable})&&(b.shiftKey||z?M.some(W=>a.has(W))?M.forEach(W=>a.delete(W)):M.forEach(W=>{var ee;const fe=(ee=r[W])==null?void 0:ee.selectable;typeof fe=="number"&&a.size>=fe||a.add(W)}):(a.clear(),M.forEach(W=>a.add(W))));else{const B=(S=r[d])==null?void 0:S.selectable;B&&(b.shiftKey||z?a.has(d)?a.delete(d):typeof B=="number"&&a.size>=B||a.add(d):(a.clear(),a.add(d)))}c.emit("edge:click",Pe(d,b))}function te(d,b){l.hoveredEdges.add(d),c.emit("edge:pointerover",Pe(d,b))}function J(d,b){l.hoveredEdges.delete(d),c.emit("edge:pointerout",Pe(d,b))}function ne(d,b){c.emit("edge:contextmenu",Pe(d,b))}function Ne(d,b){if(b.button==2||(b.preventDefault(),b.stopPropagation(),l.nodePointers.size!==0))return;l.edgePointers.size==0&&(c.emit("view:mode","edge"),we(x).forEach(([M,z])=>{document.addEventListener(M,z)}),l.edgePointerPeekCount=0),l.edgePointerPeekCount++;const S={pointerId:b.pointerId,edgeId:d};l.edgePointers.set(b.pointerId,S),c.emit("edge:pointerdown",Pe(d,b))}function We(d,b){d.forEach(S=>l.hoveredEdges.add(S)),c.emit("edge:pointerover",Pe(d,b))}function it(d,b){d.forEach(S=>l.hoveredEdges.delete(S)),c.emit("edge:pointerout",Pe(d,b))}function V(d,b){c.emit("edge:contextmenu",Pe(d,b))}const F={selectedNodes:s,hoveredNodes:i,selectedEdges:a,hoveredEdges:u,handleNodePointerDownEvent:I,handleNodePointerOverEvent:$,handleNodePointerOutEvent:N,handleNodeContextMenu:R,handleEdgePointerDownEvent:Z,handleEdgePointerOverEvent:te,handleEdgePointerOutEvent:J,handleEdgeContextMenu:ne,handleEdgesPointerDownEvent:Ne,handleEdgesPointerOverEvent:We,handleEdgesPointerOutEvent:it,handleEdgesContextMenu:V};return Ue(ir,F),F}function On(){return se(et(ir),"mouseEventHandlers")}function ju(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map(function(r){r(n)}),(o=e.get("*"))&&o.slice().map(function(r){r(t,n)})}}}const sr=Symbol("emitter");function Lu(){const e=ju();return Ue(sr,e),e}function ar(){return{emitter:se(et(sr),"event emitter")}}var Ht={getGlobalThis:function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Bt!="undefined")return Bt;if(typeof this!="undefined")return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(e.touches!==void 0&&e.touches.length){if(e.touches[n].clientX!==void 0)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(e.touches[n].pageX!==void 0){var o=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-o.left,e.clientY=e.touches[n].pageY-o.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,o=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&o<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var o=this,r,s,a,i=null,u=0;n||(n={});var c=function(){u=n.leading===!1?0:o.now(),i=null,a=e.apply(r,s),i||(r=s=null)};return function(){var l=o.now();!u&&n.leading===!1&&(u=l);var f=t-(l-u);return r=this,s=arguments,f<=0||f>t?(clearTimeout(i),i=null,u=l,a=e.apply(r,s),i||(r=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(c,f)),a}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||lr(33):lr(t)},calculateDistance:function(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)}};function lr(e){return function(t){window.setTimeout(t,e)}}var Bu=Ht,Ru=function(){var e="",t,n,o,r=[],s={passive:!0},a={passive:!1};Bu.getGlobalThis().addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on");function i(){return o||(o="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),o}function u(h,w){var p=function(v){!v&&(v=window.event);var y={originalEvent:v,target:v.target||v.srcElement,type:"wheel",deltaMode:v.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){v.preventDefault?v.preventDefault():v.returnValue=!1}};return i()=="mousewheel"?(y.deltaY=-1/40*v.wheelDelta,v.wheelDeltaX&&(y.deltaX=-1/40*v.wheelDeltaX)):y.deltaY=v.detail,w(y)};return r.push({element:h,fn:p}),p}function c(h){for(var w=0;w<r.length;w++)if(r[w].element===h)return r[w].fn;return function(){}}function l(h){for(var w=0;w<r.length;w++)if(r[w].element===h)return r.splice(w,1)}function f(h,w,p,v){var y;i()==="wheel"?y=p:y=u(h,p),h[t](e+w,y,v?s:a)}function m(h,w,p,v){var y;i()==="wheel"?y=p:y=c(h),h[n](e+w,y,v?s:a),l(h)}function x(h,w,p){f(h,i(),w,p),i()=="DOMMouseScroll"&&f(h,"MozMousePixelScroll",w,p)}function g(h,w,p){m(h,i(),w,p),i()=="DOMMouseScroll"&&m(h,"MozMousePixelScroll",w,p)}return{on:x,off:g}}(),Wt=Ht,ur="unknown";typeof document!="undefined"&&!!document.documentMode&&(ur="ie");var Mn={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(Wt.isElement(t)?n=t:n=e.querySelector(t),!n){var o=Array.prototype.slice.call(e.childNodes||e.children).filter(function(u){return u.nodeName!=="defs"&&u.nodeName!=="#text"});o.length===1&&o[0].nodeName==="g"&&o[0].getAttribute("transform")===null&&(n=o[0])}if(!n){var r="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",r);var s=e.childNodes||e.children;if(!!s&&s.length>0)for(var a=s.length;a>0;a--)s[s.length-a].nodeName!=="defs"&&n.appendChild(s[s.length-a]);e.appendChild(n)}var i=[];return n.getAttribute("class")&&(i=n.getAttribute("class").split(" ")),~i.indexOf("svg-pan-zoom_viewport")||(i.push("svg-pan-zoom_viewport"),n.setAttribute("class",i.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Wt.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var o=e[n];o.parentNode.insertBefore(o,o)}},Bt?Bt.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var o=this,r="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",r),"transform"in e.style?e.style.transform=r:"-ms-transform"in e.style?e.style["-ms-transform"]=r:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=r),ur==="ie"&&!!n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){o.refreshDefsGlobal()},o.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return Wt.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var o=t.createSVGPoint();return Wt.touchNormalize(e,t,n),o.x=e.clientX,o.y=e.clientY,o},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var o=e.createSVGPoint();return o.x=t,o.y=n,o}},he=Mn,qu={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(he.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var o=document.createElementNS(he.svgNS,"style");o.setAttribute("id","svg-pan-zoom-controls-styles"),o.setAttribute("type","text/css"),o.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(o)}var r=document.createElementNS(he.svgNS,"g");r.setAttribute("id","svg-pan-zoom-controls"),r.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),r.setAttribute("class","svg-pan-zoom-control"),r.appendChild(this._createZoomIn(e)),r.appendChild(this._createZoomReset(e)),r.appendChild(this._createZoomOut(e)),e.svg.appendChild(r),e.controlIcons=r},_createZoomIn:function(e){var t=document.createElementNS(he.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(he.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(he.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},_createZoomReset:function(e){var t=document.createElementNS(he.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(he.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(he.svgNS,"path");o.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o);var r=document.createElementNS(he.svgNS,"path");return r.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomOut:function(e){var t=document.createElementNS(he.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(he.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(he.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},Hu=Mn,qe=Ht,re=function(e,t){this.init(e,t)};re.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=qe.proxy(this.updateCTM,this),this.requestAnimationFrame=qe.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()};re.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(o){return o}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};re.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height};re.prototype.getViewBox=function(){return qe.extend({},this.viewBox)};re.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,o=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=o}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e};re.prototype.getOriginalState=function(){return qe.extend({},this.originalState)};re.prototype.getState=function(){return qe.extend({},this.activeState)};re.prototype.getZoom=function(){return this.activeState.zoom};re.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};re.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom};re.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};re.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e};re.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var o=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),r=!1,s=!1;o===!1?(e.e=this.getPan().x,e.f=this.getPan().y,r=s=!0):qe.isObject(o)&&(o.x===!1?(e.e=this.getPan().x,r=!0):qe.isNumber(o.x)&&(e.e=o.x),o.y===!1?(e.f=this.getPan().y,s=!0):qe.isNumber(o.y)&&(e.f=o.y)),r&&s||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}};re.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a};re.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f};re.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f};re.prototype.pendingUpdate=!1;re.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};re.prototype.updateCTM=function(){var e=this.getCTM();Hu.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var Wu=function(e,t){return new re(e,t)},cr=Ru,_n=qu,de=Ht,ce=Mn,Uu=Wu,U=function(e,t){this.init(e,t)},Gu={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},dr={passive:!0},fr={passive:!1};U.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),ce.setupSvgAttributes(this.svg),this.options=de.extend(de.extend({},Gu),t),this.state="none";var o=ce.getBoundingClientRectNormalized(e);this.width=o.width,this.height=o.height,this.viewport=Uu(ce.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(s,a){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(s,a)},onZoom:function(s){if(n.viewport&&n.options.onZoom)return n.options.onZoom(s)},beforePan:function(s,a){if(n.viewport&&n.options.beforePan)return n.options.beforePan(s,a)},onPan:function(s){if(n.viewport&&n.options.onPan)return n.options.onPan(s)},onUpdatedCTM:function(s){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(s)}});var r=this.getPublicInstance();r.setBeforeZoom(this.options.beforeZoom),r.setOnZoom(this.options.onZoom),r.setBeforePan(this.options.beforePan),r.setOnPan(this.options.onPan),r.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&_n.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};U.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={mousedown:function(s){var a=e.handleMouseDown(s,t);return t=s,a},touchstart:function(s){var a=e.handleTouchStart(s,t);return t=s,a},mouseup:function(s){return e.handleMouseUp(s)},touchend:function(s){return e.handleTouchEnd(s)},mousemove:function(s){return e.handleMouseMove(s)},touchmove:function(s){return e.handleTouchMove(s)},mouseleave:function(s){return e.handleMouseUp(s)},touchleave:function(s){return e.handleTouchEnd(s)},touchcancel:function(s){return e.handleTouchEnd(s)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var o=n.length-1;o>=0;o--)this.eventListeners.hasOwnProperty(n[o])&&delete this.eventListeners[n[o]]}for(var r in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(r,this.eventListeners[r],this.options.preventMouseEventsDefault?fr:dr);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};U.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;cr.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}};U.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;cr.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}};U.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,o=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/o;var r=this.svg.getScreenCTM().inverse(),s=ce.getEventPoint(e,this.svg).matrixTransform(r),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(a,s)}};U.prototype.zoomAtPoint=function(e,t,n){var o=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*o.zoom,Math.min(this.options.maxZoom*o.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*o.zoom?e=this.options.minZoom*o.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*o.zoom&&(e=this.options.maxZoom*o.zoom/this.getZoom());var r=this.viewport.getCTM(),s=t.matrixTransform(r.inverse()),a=this.svg.createSVGMatrix().translate(s.x,s.y).scale(e).translate(-s.x,-s.y),i=r.multiply(a);i.a!==r.a&&this.viewport.setCTM(i)};U.prototype.zoom=function(e,t){this.zoomAtPoint(e,ce.getSvgCenterPoint(this.svg,this.width,this.height),t)};U.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)};U.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),de.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=ce.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)};U.prototype.getZoom=function(){return this.viewport.getZoom()};U.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};U.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom};U.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)};U.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};U.prototype.reset=function(){this.resetZoom(),this.resetPan()};U.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var o=ce.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,o)};U.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),de.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&de.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=ce.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))};U.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=ce.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}};U.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")};U.prototype.handleTouchStart=function(e,t){if(e.touches.length==1)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=ce.getTouchPoint(e,this.svg,0),o=ce.getTouchPoint(e,this.svg,1);this.firstDistance=de.calculateDistance(n,o),n.x=(n.x+o.x)/2,n.y=(n.y+o.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}};U.prototype.handleTouchMove=function(e){if(e.touches.length==1)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=ce.getTouchPoint(e,this.svg,0),n=ce.getTouchPoint(e,this.svg,1),o=this.svg.createSVGPoint();if(o.x=(t.x+n.x)/2,o.y=(t.y+n.y)/2,this.state==="pan"&&this.options.panEnabled){var r=o.matrixTransform(this.firstEventCTM.inverse()),s=this.firstEventCTM.translate(r.x-this.stateOrigin.x,r.y-this.stateOrigin.y);this.viewport.setCTM(s)}if(this.options.zoomEnabled){var a=de.calculateDistance(t,n),i=a/this.firstDistance,u=this.svg.getScreenCTM().inverse(),c=o.matrixTransform(u);this.zoomAtPoint(this.firstZoomLevel*i,c,!0)}}};U.prototype.handleTouchEnd=function(e){if(e.touches.length==0)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),e.touches.length==1)this.stateOrigin=ce.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=ce.getTouchPoint(e,this.svg,0),n=ce.getTouchPoint(e,this.svg,1);this.firstDistance=de.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}};U.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)};U.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)};U.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})};U.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};U.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)};U.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)};U.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}};U.prototype.resize=function(){var e=ce.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};U.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?fr:dr);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),He=He.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};U.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:de.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:de.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,_n.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,_n.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:de.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:de.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:de.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var He=[],Vu=function(e,t){var n=de.getSvg(e);if(n===null)return null;for(var o=He.length-1;o>=0;o--)if(He[o].svg===n)return He[o].instance.getPublicInstance();return He.push({svg:n,instance:new U(n,t)}),He[He.length-1].instance.getPublicInstance()},Fu=Vu;const Xu={fitToContents(){return this.fit().center().zoomOut().zoomOut(),this},getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const o={width:e.width/n,height:e.height/n};return{box:{top:-t.y,bottom:o.height-t.y,left:-t.x,right:o.width-t.x},center:{x:o.width/2-t.x,y:o.height/2-t.y}}},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const o=Math.max(1e-4,t),r=Math.max(o,n),s=Math.max(Math.min(r,e),o),a=this.getRealZoom(),i=this.getZoom(),u=a/i;this.setMinZoom(o/u).setMaxZoom(r/u).zoom(s/u)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function Yu(e,t){var n,o;const r=e;return r._isPanEnabled=(n=t.panEnabled)!=null?n:!0,r._isZoomEnabled=(o=t==null?void 0:t.zoomEnabled)!=null?o:!0,r._internalIsPanEnabled=r.isPanEnabled,r._internalEnablePan=r.enablePan,r._internalDisablePan=r.disablePan,r._internalIsZoomEnabled=r.isZoomEnabled,r._internalEnableZoom=r.enableZoom,r._internalDisableZoom=r.disableZoom,Object.assign(e,Xu),r}function Ku(e,t){var n,o,r,s,a,i;const u=(o=(n=t.customEventsHandler)==null?void 0:n.init)!=null?o:f=>{},c=(s=(r=t.customEventsHandler)==null?void 0:r.destroy)!=null?s:f=>{},l=(i=(a=t.customEventsHandler)==null?void 0:a.haltEventListeners)!=null?i:[];return t.mouseWheelZoomEnabled===void 0&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:f=>{Yu(f.instance,t),u(f)},destroy:f=>c(f),haltEventListeners:l},Fu(e,t)}var hr;(function(e){e[e.INITIAL=0]="INITIAL",e[e.MOUNTED=1]="MOUNTED",e[e.UNMOUNTED=2]="UNMOUNTED"})(hr||(hr={}));function Qu(e,t){const n=q();let o=0;const r=[],s=[],a=()=>{o=1,r.forEach(l=>l()),r.length=0},i=()=>{o=2,s.forEach(l=>l()),s.length=0};return at(()=>{var l,f,m,x,g,h;const w=se(e.value,"<svg>"),p=(f=(l=t.customEventsHandler)==null?void 0:l.init)!=null?f:_=>{},v=(x=(m=t.customEventsHandler)==null?void 0:m.destroy)!=null?x:_=>{},y=(h=(g=t.customEventsHandler)==null?void 0:g.haltEventListeners)!=null?h:[];t.customEventsHandler={init:_=>{n.value=_.instance,p(_),a()},destroy:_=>{i(),v(_)},haltEventListeners:y},Ku(w,t)}),wt(()=>{var l;(l=n.value)==null||l.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:l=>{o===0?r.push(l):o===1&&l()},onSvgPanZoomUnmounted:l=>{o===0||o===1?s.push(l):l()}}}const vr=Symbol("zoomLevel");function Ju(e,t){const n=A(()=>t.scalingObjects?1:1/e.value);return Ue(vr,{zoomLevel:e,scale:n}),{scale:n}}function Te(){return se(et(vr),"zoomLevel")}const ec=["paths","nodes","focusring","edges","base","grid","background","root"],tc=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],nc=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],Tn=oe({props:{baseX:{type:Number,default:0},baseY:{type:Number,default:0},config:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,{scale:o}=Te(),r=q(n.baseX),s=q(n.baseY),a=q(0),i=q("#000000"),u=q(void 0),c=q(0),l=q(0),f=q(0),m=q(0);return Oe(()=>{var x;const g=o.value;a.value=n.config.strokeWidth*g,i.value=(x=n.config.strokeColor)!=null?x:"none",u.value=It(n.config.strokeDasharray,g),n.config.type==="circle"?(r.value=n.baseX,s.value=n.baseY,c.value=n.config.radius*g):(l.value=n.config.width*g,f.value=n.config.height*g,m.value=n.config.borderRadius*g,r.value=n.baseX-l.value/2,s.value=n.baseY-f.value/2)}),t({x:r,y:s,strokeWidth:a,strokeColor:i,strokeDasharray:u,radius:c,width:l,height:f,borderRadius:m}),(x,g)=>e.config.type==="circle"?(O(),C("circle",{key:0,class:"v-shape-circle",cx:r.value,cy:s.value,r:c.value,fill:e.config.color,stroke:i.value,"stroke-width":a.value,"stroke-dasharray":u.value},null,8,tc)):(O(),C("rect",{key:1,class:"v-shape-rect",x:r.value,y:s.value,width:l.value,height:f.value,rx:m.value,ry:m.value,fill:e.config.color,stroke:i.value,"stroke-width":a.value,"stroke-dasharray":u.value},null,8,nc))}}),oc=["rx","ry","fill","transform"],rc=["x","y","dominant-baseline","font-family","font-size","fill"],ic=["x","dy","dominant-baseline"],Ut=oe({props:{text:{type:String,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0},dominantBaseline:{type:String,required:!1,default:"central"},config:{type:Object,required:!0}},setup(e,{expose:t}){const n=e;function o(p,v,y){var _;const k=p.getBBox();v.x=k.x,v.y=k.y,v.width=k.width,v.height=k.height,y.value=(_=p.getAttribute("transform"))!=null?_:void 0}function r(p,v,y){const _=new MutationObserver(()=>{o(p,v,y)});return _.observe(p,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),o(p,v,y),_}const s=br(),{scale:a}=Te(),i=A(()=>{var p,v;return(v=(p=n.text)==null?void 0:p.toString().split(/\r?\n/))!=null?v:""}),u=A(()=>{var p;return(p=s["font-size"])!=null?p:n.config.fontSize*a.value}),c=A(()=>u.value*n.config.lineHeight),l=A(()=>{const p=n.dominantBaseline;return p==="hanging"?0:p==="central"?-(c.value*(i.value.length-1))/2:-c.value*(i.value.length-1)}),f=q(),m=q(""),x=Ae({x:0,y:0,width:0,height:0}),g=A(()=>{var p,v;const y=n.config.background;if(!y)return x;let _,k;y.padding instanceof Object?(_=y.padding.vertical,k=y.padding.horizontal):(_=(p=y.padding)!=null?p:0,k=(v=y.padding)!=null?v:0);const E=c.value-u.value;return{x:x.x-k*a.value,y:x.y-_*a.value-E/2,width:x.width+k*2*a.value,height:x.height+_*2*a.value+E}});let h;const w=()=>{n.config.background&&n.config.background.visible?!h&&f.value&&(h=r(f.value,x,m)):(h==null||h.disconnect(),h=void 0)};return at(()=>w()),X(()=>n.config.background&&n.config.background.visible,(p,v)=>{p!=v&&w()}),wt(()=>{h==null||h.disconnect(),h=void 0}),t({fontSize:u,element:f,transform:m,backgroundRectPos:g,scale:a}),(p,v)=>{var y,_,k,E,T,I;return O(),C(G,null,[e.config.background&&e.config.background.visible?(O(),C("rect",je({key:0,class:"v-text-background"},P(g),{rx:((_=(y=e.config.background)==null?void 0:y.borderRadius)!=null?_:0)*P(a),ry:((E=(k=e.config.background)==null?void 0:k.borderRadius)!=null?E:0)*P(a),fill:(I=(T=e.config.background)==null?void 0:T.color)!=null?I:"#ffffff",transform:m.value}),null,16,oc)):pe("",!0),Vt("text",je({ref_key:"element",ref:f,class:"v-text"},p.$attrs,{x:e.x,y:e.y,"dominant-baseline":e.dominantBaseline,"font-family":p.$attrs["font-family"]?`${p.$attrs["font-family"]}`:e.config.fontFamily,"font-size":P(u),fill:p.$attrs.fill?`${p.$attrs.fill}`:e.config.color}),[P(i).length<=1?(O(),C(G,{key:0},[wr($n(e.text),1)],64)):(O(!0),C(G,{key:1},Q(P(i),($,N)=>(O(),C("tspan",{key:N,x:e.x,dy:N==0?P(l):P(c),"dominant-baseline":e.dominantBaseline},$n($),9,ic))),128))],16,rc)],64)}}});var Ee=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n};const sc=["transform"],ac=oe({props:{id:{type:String,required:!0},state:{type:Object,required:!0},pos:{type:Object,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,o=A(()=>{var k;return((k=n.pos)==null?void 0:k.x)||0}),r=A(()=>{var k;return((k=n.pos)==null?void 0:k.y)||0}),s=Bo(),{scale:a}=Te(),{handleNodePointerDownEvent:i,handleNodePointerOverEvent:u,handleNodePointerOutEvent:c,handleNodeContextMenu:l}=On(),f=A(()=>{var k;return n.state.label.visible&&(k=n.state.labelText)!=null?k:!1}),m=A(()=>n.state.label.direction===j.CENTER?0:n.state.label.margin*a.value),x=q(0),g=q(0),h=q(0),w=q(0);Oe(()=>{const k=a.value,E=n.state.shape;if(E.type=="circle"){const T=E.radius*k,I=T+m.value,$=Math.sqrt(me(I,2)/2);x.value=T+m.value,g.value=T+m.value,h.value=$,w.value=$}else{const T=E.borderRadius*k,I=E.width*k,$=E.height*k,N=T+m.value,R=Math.sqrt(me(N,2)/2);x.value=$/2+m.value,g.value=I/2+m.value,h.value=$/2-T+R,w.value=I/2-T+R}});const p=A(()=>{switch(n.state.label.direction){case j.CENTER:case j.NORTH:case j.SOUTH:return"middle";case j.EAST:case j.NORTH_EAST:case j.SOUTH_EAST:return"start";case j.WEST:case j.NORTH_WEST:case j.SOUTH_WEST:default:return"end"}}),v=A(()=>{switch(n.state.label.direction){case j.NORTH:case j.NORTH_EAST:case j.NORTH_WEST:return"text-top";case j.SOUTH:case j.SOUTH_EAST:case j.SOUTH_WEST:return"hanging";case j.CENTER:case j.EAST:case j.WEST:default:return"central"}}),y=A(()=>{switch(n.state.label.direction){case j.CENTER:case j.NORTH:case j.SOUTH:return 0;case j.EAST:return g.value;case j.WEST:return-g.value;case j.NORTH_EAST:case j.SOUTH_EAST:return w.value;case j.NORTH_WEST:case j.SOUTH_WEST:default:return-w.value}}),_=A(()=>{switch(n.state.label.direction){case j.NORTH:return-x.value;case j.SOUTH:return x.value;case j.CENTER:case j.EAST:case j.WEST:return 0;case j.NORTH_EAST:case j.NORTH_WEST:return-h.value;case j.SOUTH_EAST:case j.SOUTH_WEST:default:return h.value}});return t({x:o,y:r,config:s,labelVisibility:f,handleNodePointerDownEvent:i,handleNodePointerOverEvent:u,handleNodePointerOutEvent:c,handleNodeContextMenu:l,textAnchor:p,dominantBaseline:v,labelX:y,labelY:_,scale:a}),(k,E)=>(O(),C("g",{class:ge({"v-node":!0,hover:e.state.hovered,selected:e.state.selected}),transform:`translate(${P(o)} ${P(r)})`,onPointerdown:E[0]||(E[0]=xt(T=>P(i)(e.id,T),["prevent","stop"])),onPointerenterPassive:E[1]||(E[1]=T=>P(u)(e.id,T)),onPointerleavePassive:E[2]||(E[2]=T=>P(c)(e.id,T)),onContextmenu:E[3]||(E[3]=T=>P(l)(e.id,T))},[ue(k.$slots,"override-node",{nodeId:e.id,scale:P(a),config:e.state.shape,class:ge({draggable:e.state.draggable,selectable:e.state.selectable})},()=>[Le(Tn,{config:e.state.shape,class:ge({draggable:e.state.draggable,selectable:e.state.selectable})},null,8,["config","class"])],!0),P(f)?ue(k.$slots,"override-node-label",{key:0,nodeId:e.id,scale:P(a),text:e.state.labelText,x:P(y),y:P(_),config:e.state.label,shape:e.state.shape,textAnchor:P(p),dominantBaseline:P(v)},()=>[Le(Ut,{text:e.state.labelText,x:P(y),y:P(_),config:e.state.label,"text-anchor":P(p),"dominant-baseline":P(v)},null,8,["text","x","y","config","text-anchor","dominant-baseline"])],!0):pe("",!0)],42,sc))}});var lc=Ee(ac,[["__scopeId","data-v-20ea340e"]]);const uc=oe({props:{id:{type:String,required:!0},state:{type:Object,required:!0},pos:{type:Object,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,o=A(()=>{var i;return((i=n.pos)==null?void 0:i.x)||0}),r=A(()=>{var i;return((i=n.pos)==null?void 0:i.y)||0}),s=Bo(),a=Ae({});return Oe(()=>{var i,u,c;const l=n.state.shape;if(l.type==="circle"){const f={type:"circle",radius:l.radius+((i=l.strokeWidth)!=null?i:0)/2+s.focusring.padding+s.focusring.width/2,color:"none",strokeWidth:s.focusring.width,strokeColor:s.focusring.color,strokeDasharray:s.focusring.dasharray};Object.assign(a,f)}else{const f={type:"rect",width:l.width+((u=l.strokeWidth)!=null?u:0)+s.focusring.padding*2+s.focusring.width,height:l.height+((c=l.strokeWidth)!=null?c:0)+s.focusring.padding*2+s.focusring.width,borderRadius:l.borderRadius>0?l.borderRadius+s.focusring.padding:0,color:"none",strokeWidth:s.focusring.width,strokeColor:s.focusring.color,strokeDasharray:s.focusring.dasharray};Object.assign(a,f)}}),t({x:o,y:r,shapeConfig:a}),(i,u)=>(O(),le(Tn,{class:"v-node-focus-ring","base-x":P(o),"base-y":P(r),config:P(a)},null,8,["base-x","base-y","config"]))}});var cc=Ee(uc,[["__scopeId","data-v-4f2bee14"]]);const dc=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],fc=oe({props:{x1:{type:Number,required:!0},y1:{type:Number,required:!0},x2:{type:Number,required:!0},y2:{type:Number,required:!0},config:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,{scale:o}=Te(),r=A(()=>n.config.width*o.value),s=A(()=>It(n.config.dasharray,o.value)),a=A(()=>{const i=n.config.animate?cn(n.config.dasharray)*n.config.animationSpeed*o.value:!1;return i?`--animation-speed:${i}`:void 0});return t({strokeWidth:r,strokeDasharray:s,animationSpeed:a}),(i,u)=>(O(),C("path",{class:ge({"v-line":!0,animate:e.config.animate}),d:`M ${e.x1} ${e.y1} L ${e.x2} ${e.y2}`,stroke:e.config.color,"stroke-width":P(r),"stroke-dasharray":P(s),"stroke-linecap":e.config.linecap,style:Ft(P(a))},null,14,dc))}});var pr=Ee(fc,[["__scopeId","data-v-1809a5d0"]]);function hc(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++o<r;)s[o]=e[o+t];return s}var vc=Math.ceil,pc=Math.max;function An(e,t,n){(n?Zo(e,t,n):t===void 0)?t=1:t=pc(bo(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,s=0,a=Array(vc(o/t));r<o;)a[s++]=hc(e,r,r+=t);return a}const gc=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],mc=oe({props:{state:{type:Object,required:!0},config:{type:Object,required:!0},markerStart:{type:String,required:!1,default:void 0},markerEnd:{type:String,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,{scale:o}=Te(),r=A(()=>{var u,c;const l=n.state.position,f=[...(c=(u=n.state.curve)==null?void 0:u.control)!=null?c:[],{x:l.x2,y:l.y2}],m=[];return m.push(`M ${l.x1} ${l.y1}`),An(f,2).forEach(([x,g])=>m.push(`Q ${x.x} ${x.y} ${g.x} ${g.y}`)),m.join(" ")}),s=A(()=>n.config.width*o.value),a=A(()=>It(n.config.dasharray,o.value)),i=A(()=>{const u=n.config.animate?cn(n.config.dasharray)*n.config.animationSpeed*o.value:!1;return u?`--animation-speed:${u}`:void 0});return t({strokeWidth:s,strokeDasharray:a,animationSpeed:i}),(u,c)=>(O(),C("path",{class:ge({"v-line":!0,animate:e.config.animate}),d:P(r),fill:"none",stroke:e.config.color,"stroke-width":P(s),"stroke-dasharray":P(a),"stroke-linecap":e.config.linecap,style:Ft(P(i)),"marker-start":e.markerStart,"marker-end":e.markerEnd},null,14,gc))}});var yc=Ee(mc,[["__scopeId","data-v-1fa4fd0c"]]);const bc=oe({props:{id:{type:String,required:!0},state:{type:Object,required:!0},sourcePos:{type:Object,required:!1,default:void 0},targetPos:{type:Object,required:!1,default:void 0}},setup(e,{expose:t}){const n=jt();return t({config:n}),(o,r)=>P(n).type=="straight"||!e.state.curve?(O(),le(pr,je({key:0},e.state.position,{class:{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["class","config","marker-start","marker-end"])):(O(),le(yc,{key:1,class:ge({selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected}),state:e.state,config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0},null,8,["class","state","config","marker-start","marker-end"]))}});var wc=Ee(bc,[["__scopeId","data-v-f407a16e"]]);const xc=oe({props:{edges:{type:Object,required:!0},layouts:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,o=jt(),{handleEdgesPointerDownEvent:r,handleEdgesPointerOverEvent:s,handleEdgesPointerOutEvent:a,handleEdgesContextMenu:i}=On(),{edgeStates:u}=yt(),c=q({x1:0,y1:0,x2:0,y2:0}),l=q({x:0,y:0});Oe(()=>{const v=Object.keys(n.edges).find(y=>y in u);v&&(c.value=u[v].position,l.value={x:(c.value.x1+c.value.x2)/2,y:(c.value.y1+c.value.y2)/2})});const f=A(()=>Object.keys(n.edges)),m=A(()=>D.values(o.summarized.label,n.edges)),x=A(()=>D.values(o.summarized.shape,n.edges)),g=A(()=>D.values(o.summarized.stroke,n.edges)),h=A(()=>f.value.some(v=>u[v].hovered)),w=A(()=>f.value.some(v=>u[v].selectable)),p=A(()=>f.value.some(v=>u[v].selected));return t({config:o,pos:c,centerPos:l,handleEdgesPointerDownEvent:r,handleEdgesPointerOverEvent:s,handleEdgesPointerOutEvent:a,handleEdgesContextMenu:i,hovered:h,selectable:w,selected:p}),(v,y)=>(O(),C("g",{class:ge({"v-line-summarized":!0,hovered:P(h),selectable:P(w),selected:P(p)}),onPointerdown:y[0]||(y[0]=xt(_=>P(r)(P(f),_),["prevent","stop"])),onPointerenterPassive:y[1]||(y[1]=_=>P(s)(P(f),_)),onPointerleavePassive:y[2]||(y[2]=_=>P(a)(P(f),_)),onContextmenu:y[3]||(y[3]=_=>P(i)(P(f),_))},[Le(pr,je(c.value,{config:P(g)}),null,16,["config"]),Le(Tn,{"base-x":l.value.x,"base-y":l.value.y,config:P(x)},null,8,["base-x","base-y","config"]),Le(Ut,{text:Object.keys(e.edges).length.toString(),x:l.value.x,y:l.value.y,config:P(m),"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}});var Pc=Ee(xc,[["__scopeId","data-v-3b805f24"]]);const Ec=oe({setup(e,{expose:t}){const{edgeStates:n,edgeGroupStates:o,layouts:r}=yt();return t({edgeStates:n,edgeGroupStates:o,layouts:r}),(s,a)=>(O(!0),C(G,null,Q(P(o).edgeGroups,({summarize:i,edges:u},c)=>(O(),C(G,null,[i?(O(),le(Pc,{key:c,edges:u,layouts:P(r).nodes},null,8,["edges","layouts"])):(O(!0),C(G,{key:1},Q(u,(l,f)=>(O(),le(wc,{key:f,id:f,state:P(n)[f],"source-pos":P(r).nodes[l.source],"target-pos":P(r).nodes[l.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),Sc=["d","stroke-width"],Oc=oe({props:{id:{type:String,required:!0},state:{type:Object,required:!0},sourcePos:{type:Object,required:!1,default:void 0},targetPos:{type:Object,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,{scale:o}=Te(),r=jt(),{handleEdgePointerDownEvent:s,handleEdgePointerOverEvent:a,handleEdgePointerOutEvent:i,handleEdgeContextMenu:u}=On(),c=A(()=>{const f=n.state.position;if(r.type==="straight"||!n.state.curve)return`M ${f.x1} ${f.y1} L ${f.x2} ${f.y2}`;{const m=[...n.state.curve.control,{x:f.x2,y:f.y2}],x=[];return x.push(`M ${f.x1} ${f.y1}`),An(m,2).forEach(([g,h])=>x.push(`Q ${g.x} ${g.y} ${h.x} ${h.y}`)),x.join(" ")}}),l=A(()=>(n.state.line.stroke.width+10)*o.value);return t({config:r,handleEdgePointerDownEvent:s,handleEdgePointerOverEvent:a,handleEdgePointerOutEvent:i,handleEdgeContextMenu:u}),(f,m)=>(O(),C("path",{class:ge({"v-line-background":!0,selectable:e.state.selectable}),d:P(c),stroke:"transparent","stroke-width":P(l),fill:"none",onPointerdown:m[0]||(m[0]=xt(x=>P(s)(e.id,x),["prevent","stop"])),onPointerenterPassive:m[1]||(m[1]=x=>P(a)(e.id,x)),onPointerleavePassive:m[2]||(m[2]=x=>P(i)(e.id,x)),onContextmenu:m[3]||(m[3]=x=>P(u)(e.id,x))},null,42,Sc))}});var Mc=Ee(Oc,[["__scopeId","data-v-1b4a2a82"]]);const _c=oe({setup(e,{expose:t}){const{edgeStates:n,edgeGroupStates:o,layouts:r}=yt();return t({edgeStates:n,edgeGroupStates:o,layouts:r}),(s,a)=>(O(!0),C(G,null,Q(P(o).edgeGroups,({summarize:i,edges:u})=>(O(),C(G,null,[i?pe("",!0):(O(!0),C(G,{key:0},Q(u,(c,l)=>(O(),le(Mc,{key:l,id:l,state:P(n)[l],"source-pos":P(r).nodes[c.source],"target-pos":P(r).nodes[c.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),Tc={class:"v-edge-labels"},Ac=oe({setup(e,{expose:t}){const n=jt(),{nodeStates:o,edgeStates:r,edgeGroupStates:s,summarizedEdgeStates:a,layouts:i}=yt(),{scale:u}=Te(),c=A(()=>Object.fromEntries(Object.entries(s.edgeGroups).filter(([h,w])=>!w.summarize&&Object.keys(w.edges).length>0))),l=A(()=>{const h={},w={};return Object.entries(s.edgeGroups).forEach(([p,v])=>{Object.keys(v.edges).length>0&&(v.summarize?w[p]=v:h[p]=v)}),{indivisual:h,summarized:w}}),f=A(()=>h=>{var w;return{pos:(w=i.nodes[h])!=null?w:{x:0,y:0},shape:o[h].shape}}),m=A(()=>(h,w,p,v)=>Jo(r[h].labelPosition,v,n.label.margin,n.label.padding,u.value)),x=A(()=>(h,w)=>{var p,v;const y=Object.keys(w.edges)[0];return Jo(r[y].labelPosition,(v=(p=a[h])==null?void 0:p.stroke)!=null?v:r[y].line.stroke,n.label.margin,n.label.padding,u.value)}),g=A(()=>h=>r[Object.keys(h.edges)[0]]);return t({indivisualEdgeGroups:c,edgeGroups:l,nodeShape:f,labelAreaPosition:m,groupLabelAreaPosition:x,representativeEdgeState:g,edgeStates:r,edgeConfig:n,scale:u}),(h,w)=>(O(),C("g",Tc,[(O(!0),C(G,null,Q(P(l).indivisual,(p,v)=>(O(),C(G,{key:v},[(O(!0),C(G,null,Q(p.edges,(y,_)=>ue(h.$slots,"edge-label",{key:_,edgeId:_,edge:y,config:P(n).label,area:P(m)(_,P(f)(y.source),P(f)(y.target),P(r)[_].line.stroke),hovered:P(r)[_].hovered,selected:P(r)[_].selected,scale:P(u)},void 0,!0)),128))],64))),128)),(O(!0),C(G,null,Q(P(l).summarized,(p,v)=>ue(h.$slots,"edges-label",{key:v,edges:p.edges,config:P(n).label,area:P(x)(v,p),hovered:P(g)(p).hovered,selected:P(g)(p).selected,scale:P(u)},void 0,!0)),128))]))}});var Cc=Ee(Ac,[["__scopeId","data-v-15f17dbf"]]);const kc=oe({setup(e,{expose:t}){const{viewport:n}=ho(),o=q(),r=(a,i,u)=>{a.forEach(c=>{var l;return i.setAttribute(c,(l=u.getAttribute(c))!=null?l:"")})},s=new MutationObserver(a=>{if(!o.value)return;const i=a.map(u=>{var c;return(c=u.attributeName)!=null?c:""}).filter(Boolean);r(i,o.value,n.value)});return at(()=>{const a=["transform","style"];s.observe(n.value,{attributes:!0,attributeFilter:a}),!!o.value&&r(a,o.value,n.value)}),wt(()=>{s.disconnect()}),t({background:o}),(a,i)=>(O(),C("g",{ref_key:"background",ref:o,class:"v-background-viewport"},[ue(a.$slots,"default")],512))}}),$c={class:"v-background-grid","shape-rendering":"crispEdges"},Ic=["d"],zc=["d"],Nc=["d"],Zc=["d"],Dc=oe({setup(e,{expose:t}){const{emitter:n}=ar(),{container:o,svgPanZoom:r}=ho(),{zoomLevel:s}=Te(),a=Ll(),i=q({x:0,y:0}),u=q({width:500,height:500});at(()=>{var x;const g=(x=r.value)==null?void 0:x.getPan();g&&(i.value={x:-g.x,y:-g.y});const h=o.value.getBoundingClientRect();u.value={width:h.width,height:h.height}}),n.on("view:resize",x=>{u.value={width:x.width,height:x.height}}),n.on("view:pan",x=>{i.value={x:-x.x,y:-x.y}}),n.on("view:zoom",()=>{var x;const g=(x=r.value)==null?void 0:x.getPan();g&&(i.value={x:-g.x,y:-g.y})});const c=q([]),l=q([]),f=q([]),m=q([]);return Oe(()=>{const x=[],g=[],h=[],w=[],p=1/s.value,v=a.grid.interval,y=i.value.x*p,_=i.value.y*p,k=Math.floor(u.value.width/v+1)*v,E=Math.floor(u.value.height/v+1)*v,T=(i.value.x+k)*p,I=(i.value.y+E)*p,$=a.grid.thickIncrements,N=a.grid.line.dasharray,R=a.grid.thick.dasharray;let Z={stroke:a.grid.thick.color,"stroke-width":a.grid.thick.width,"stroke-dasharray":R,"stroke-dashoffset":R?y/p:void 0},L={stroke:a.grid.line.color,"stroke-width":a.grid.line.width,"stroke-dasharray":N,"stroke-dashoffset":N?y/p:void 0};const ae=(i.value.x+k)*p;for(let te=_;te<=I;te+=v){const J=Math.floor(te/v);$&&J%$==0?x.push([J,J*v,y,ae,Z]):h.push([J,J*v,y,ae,L])}Z=$e({},Z),Z["stroke-dashoffset"]=R?_/p:void 0,L=$e({},L),L["stroke-dashoffset"]=N?_/p:void 0;const K=(i.value.y+E)*p;for(let te=y;te<=T;te+=v){const J=Math.floor(te/v);$&&J%$==0?g.push([J,J*v,_,K,Z]):w.push([J,J*v,_,K,L])}l.value=x,c.value=g,m.value=h,f.value=w}),t({thickVerticals:c,thickHorizontals:l,normalVerticals:f,normalHorizontals:m}),(x,g)=>(O(),C("g",$c,[(O(!0),C(G,null,Q(m.value,([h,w,p,v,y])=>(O(),C("path",je({key:`nv${h}`,d:`M ${p} ${w} L ${v} ${w}`},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Ic))),128)),(O(!0),C(G,null,Q(f.value,([h,w,p,v,y])=>(O(),C("path",je({key:`nh${h}`,d:`M ${w} ${p} L ${w} ${v}`},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,zc))),128)),(O(!0),C(G,null,Q(l.value,([h,w,p,v,y])=>(O(),C("path",je({key:`tv${h}`,d:`M ${p} ${w} L ${v} ${w}`},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Nc))),128)),(O(!0),C(G,null,Q(c.value,([h,w,p,v,y])=>(O(),C("path",je({key:`th${h}`,d:`M ${w} ${p} L ${w} ${v}`},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Zc))),128))]))}}),jc=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],Lc=oe({props:{points:{type:Array,required:!0},path:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,{scale:o}=Te(),r=Ro(),s=A(()=>{let c=!0;return n.points.map(l=>{if(l===null)c=!0;else if(l instanceof Array){l=[...l];const f=[];if(l.length%2==1){const m=l[0];l=l.slice(1),f.push(`L ${m.x} ${m.y}`)}return An(l,2).map(([m,x])=>f.push(`Q ${m.x} ${m.y} ${x.x} ${x.y}`)),f.join(" ")}else{const f=c;return c=!1,`${f?"M ":"L "}${l.x} ${l.y}`}}).join(" ")}),a=A(()=>D.values(r.path,n.path)),i=A(()=>It(a.value.dasharray,o.value)),u=A(()=>{const c=a.value.animate?cn(a.value.dasharray)*a.value.animationSpeed*o.value:!1;return c?`--animation-speed:${c}`:void 0});return t({d:s,scale:o,config:a,strokeDasharray:i,animationSpeed:u}),(c,l)=>(O(),C("path",{class:ge({"v-path-line":!0,animate:P(a).animate}),d:P(s),fill:"none",stroke:P(a).color,"stroke-width":P(a).width*P(o),"stroke-dasharray":P(i),"stroke-linecap":P(a).linecap,"stroke-linejoin":P(a).linejoin,style:Ft(P(u))},null,14,jc))}});var Bc=Ee(Lc,[["__scopeId","data-v-d5817f5c"]]);const Rc=oe({props:{paths:{type:Array,required:!0},edges:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,o=Number.EPSILON*100,r=Ro(),{nodeStates:s,edgeStates:a,layouts:i}=yt(),{scale:u}=Te(),{emitter:c}=ar(),l=A(()=>{const E=[];for(const T of n.paths){const I=T.edges.map($=>({edgeId:$,edge:n.edges[$]})).filter($=>$.edge);I.length===T.edges.length&&E.push({path:T,edges:I})}return E}),f=A(()=>E=>{if(E.edges.length===0)return[];const T=D.value(r.margin,E.path)*u.value;return g(E,s,i.nodes,a,u.value,r.curveInNode,r.end,T)}),m=(E,T)=>{!r.clickable||c.emit("path:click",{path:E,event:T})},x=(E,T)=>{!r.clickable||c.emit("path:contextmenu",{path:E,event:T})};function g(E,T,I,$,N,R,Z,L){var ae;const K=E.edges,te=w(K),J=K.map((V,F)=>_(V,te[F],$[V.edgeId])),ne=[];let Ne=!1,We=!1;{const V=J[0];let F=h(T[V.source].shape)*N;const d=L+(Z==="edgeOfNode"?F:0),b=d<=0?V.line.source:p(V,d,I,!0);ne.push(b),F=h(T[V.target].shape)*N,L>0&&xe(V.line.source,V.line.target)<=d+F&&(Ne=!0)}const it=K.length;for(let V=1;V<it;V++){const F=J[V-1],d=J[V],b=d.source,S=H.fromObject((ae=I[b])!=null?ae:{x:0,y:0}),M=v(F,d,S),z=h(T[b].shape)*N,B=Math.max(z*(2/3),z-4*N),W=y(F,S,B,!0),ee=y(d,S,B,!1),fe=y(F,S,z,!0),Se=y(d,S,z,!1);let ie;if(M){const Ze=xe(M,S);if(Ze<B)ie=[Nt(W,fe,F.line.target),M,Nt(ee,Se,d.line.source)];else if(Ze<=z){let st,De;fe&&W?st=xe(M,W)<xe(M,fe)?W:fe:st=fe||F.line.target,Se&&ee?De=xe(M,ee)<xe(M,Se)?ee:Se:De=Se||d.line.source,ie=[st,M,De]}else W&&ee?ie=[W,S,ee]:fe&&Se?ie=[fe,S,Se]:ie=[Nt(W,fe,F.line.target),S,Nt(ee,Se,d.line.source)]}else W&&ee?ie=[W,S,ee]:fe&&Se?ie=[fe,S,Se]:ie=[F.line.target,S,d.line.source];if(F.curve){const Ze=ne[ne.length-1];if(Ze){const st=Ze instanceof Array?Ze[Ze.length-1]:Ze;let De;ie instanceof Array?De=R?ie[0]:ie[1]:De=ie;const Cn=En(st,F.curve.circle.center,De,F.curve.theta);ie instanceof Array&&R?ne.push([...Cn,...ie]):ne.push([...Cn,De])}}else R||!(ie instanceof Array)?ne.push(ie):d.curve?ne.push(ie[1]):ne.push(ie[0],ie[2])}{const V=J[J.length-1];let F=h(T[V.target].shape)*N;const d=L+(Z==="edgeOfNode"?F:0),b=d<=0?V.line.target:p(V,d,I,!1);F=h(T[V.source].shape)*N;const S=V.curve;if(S){const M=ne[ne.length-1],z=M instanceof Array?M[M.length-1]:M,B=En(z,S.circle.center,b,S.theta);ne.push([...B,b])}else ne.push(b);L>0&&xe(V.line.source,V.line.target)<=d+F&&(We=!0)}return Ne&&(ne.shift(),ne[0]instanceof Array&&ne.unshift(ne[0][0])),We&&ne.pop(),ne}function h(E){return E.type=="circle"?E.radius:Math.min(E.width,E.height)/2}function w(E){const T=E.length;if(T<=1)return[!0];const I=[];let $=null;for(let N=0;N<T;N++){const R=E[N].edge.source,Z=E[N].edge.target;let L;if(N===0)if(T>2){const ae=[R,Z].sort(),K=[E[1].edge.source,E[1].edge.target].sort();ae[0]===K[0]&&ae[1]===K[1]?[E[2].edge.source,E[2].edge.target].includes(E[1].edge.target)?L=Z===E[1].edge.source:L=Z===E[1].edge.target:L=[E[1].edge.source,E[1].edge.target].includes(Z)}else L=[E[1].edge.source,E[1].edge.target].includes(Z);else L=$===R;I.push(L),$=L?Z:R}return I}function p(E,T,I,$){const N=$?E.source:E.target,R=E.curve;if(R){let Z=T/R.circle.radius;return R.theta>0&&(Z*=-1),$||(Z*=-1),H.fromObject(rt($?E.line.source:E.line.target,R.circle.center,Z))}else{let Z,L;$?(Z=E.line.target,L=E.line.source):(Z=E.line.source,L=E.line.target);const ae=mn(Z,L,H.fromObject(I[N]),T);return ae===null?Z:ae}}function v(E,T,I){let $=null;if(E.curve)if(T.curve){if(E.line.target.isEqualTo(T.line.source))return E.line.target.clone();$=Vo(E.curve.circle.center,E.curve.circle.radius,T.curve.circle.center,T.curve.circle.radius,E.curve.center)}else $=Kl(T.line.target,T.line.source,E.curve.circle.center,E.curve.circle.radius,I);else if(T.curve)$=mn(E.line.source,E.line.target,T.curve.circle.center,T.curve.circle.radius);else{const N=k(E.line),R=k(T.line);!isFinite(N)&&!isFinite(R)||Math.abs(N-R)<o?$=null:$=Je(E.line,T.line)}return $}function y(E,T,I,$){return E.curve?Vo(T,I,E.curve.circle.center,E.curve.circle.radius,H.fromObject(E.curve.center)):mn($?E.line.source:E.line.target,$?E.line.target:E.line.source,T,I)}function _(E,T,I){let $=I.origin,N=E.edge.source,R=E.edge.target,Z=I.curve;T||($=Cu($),N=E.edge.target,R=E.edge.source,Z&&(Z=Xt($e({},Z),{theta:-Z.theta})));const L=gt($);return{edgeId:E.edgeId,source:N,target:R,line:L,curve:Z}}function k(E){return(E.target.y-E.source.y)/(E.target.x-E.source.x)}return t({pathConfig:r,pathList:l,calcPathPoints:f,emitPathClickedEvent:m,emitPathContextMenuEvent:x}),(E,T)=>(O(),le(In,{name:P(r).transition,css:!!P(r).transition,tag:"g",class:"v-paths"},{default:Ge(()=>[(O(!0),C(G,null,Q(P(l),(I,$)=>(O(),le(Bc,{key:$,points:P(f)(I),class:ge({clickable:P(r).clickable}),path:I.path,onClick:xt(N=>m(I.path,N),["prevent","stop"]),onContextmenu:N=>x(I.path,N)},null,8,["points","class","path","onClick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}});var qc=Ee(Rc,[["__scopeId","data-v-7191e492"]]);const Hc=["points","fill"],Wc=oe({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){const t=e,n=A(()=>{const o=t.width,r=t.height;return t.isSource?`${o} ${r}, 0 ${r/2}, ${o} 0`:`0 0, ${o} ${r/2}, 0 ${r}`});return(o,r)=>(O(),C("polygon",{points:P(n),fill:e.color},null,8,Hc))}}),Uc=["points","stroke-width","stroke"],Gc=oe({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){const t=e,n=A(()=>t.units==="strokeWidth"?1:Math.min(t.width,t.height)/5),o=A(()=>{const r=n.value/2,s=t.width,a=t.height;return t.isSource?`${s-r} ${a-r}, ${r} ${a/2}, ${s-r} ${r}`:`${r} ${r}, ${s-r} ${a/2}, ${r} ${a-r}`});return(r,s)=>(O(),C("polyline",{points:P(o),fill:"none","stroke-width":P(n),stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,Uc))}}),Vc=["fill","cx","cy","rx","ry"],Fc=oe({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){return(t,n)=>(O(),C("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,Vc))}}),Xc=["id","markerWidth","markerHeight","refX","refY","markerUnits"],Yc=oe({props:{id:{type:String,required:!0},marker:{type:Object,required:!0},scale:{type:Number,required:!0}},setup(e){const t=e,n={arrow:Wc,angle:Gc,circle:Fc},o=A(()=>t.marker.width*(t.marker.units==="strokeWidth"?1:t.scale)),r=A(()=>t.marker.height*(t.marker.units==="strokeWidth"?1:t.scale)),s=A(()=>{const a=t.marker.margin*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?o.value+a:-a});return(a,i)=>e.marker.type!=="none"&&e.marker.type!=="custom"?(O(),C("marker",{key:0,id:e.id,markerWidth:P(o),markerHeight:P(r),refX:P(s),refY:P(r)/2,orient:"auto",markerUnits:e.marker.units,class:"v-marker"},[(O(),le(yr(n[e.marker.type]),{width:P(o),height:P(r),refX:P(s),color:e.marker.color,"is-source":e.marker.isSource,units:e.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,Xc)):pe("",!0)}}),Kc=["override-node","override-node-label","edge-label","edges-label"];var gr;(function(e){e[e.INITIAL=0]="INITIAL",e[e.LOADED=1]="LOADED",e[e.UNLOADED=2]="UNLOADED"})(gr||(gr={}));const Qc=oe({components:{VNode:lc,VNodeFocusRing:cc,VEdgeGroups:Ec,VEdgeBackgrounds:_c,VEdgeLabels:Cc,VBackgroundViewport:kc,VBackgroundGrid:Dc,VPaths:qc,VMarkerHead:Yc},props:{nodes:{type:Object,default:()=>({})},edges:{type:Object,default:()=>({})},layouts:{type:Object,default:()=>({})},zoomLevel:{type:Number,default:1},selectedNodes:{type:Array,default:()=>[]},selectedEdges:{type:Array,default:()=>[]},configs:{type:Object,default:()=>({})},paths:{type:Array,default:()=>[]},layers:{type:Object,default:()=>({})},eventHandlers:{type:Object,default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:layouts"],setup(e,{emit:t,slots:n}){const o=Lu();Object.entries(e.eventHandlers).forEach(([d,b])=>{o.on(d,b)});const r=jl(e.configs),s=A(()=>{const d=new Set(Object.keys(n));Kc.forEach(S=>d.delete(S));const b=Object.fromEntries(ec.map(S=>[S,[]]));return Object.assign(b,Object.entries(e.layers).reduce((S,[M,z])=>(d.delete(M),z in S?S[z].push(M):S[z]=[M],S),{})),b.root.push(...d),b}),a=A(()=>r.view.grid.visible),i=A(()=>{const d=s.value;return a.value||d.background.length>0||d.grid.length>0}),u=A(()=>"override-node"in n),c=A(()=>"override-node-label"in n),l=A(()=>"edge-label"in n),f=A(()=>"edges-label"in n),m=q(),x=q(),g=q(),h=q(0),w=A(()=>h.value!==0),p=Oa(e,"zoomLevel",t,d=>(d=Math.max(d,r.view.minZoomLevel),d=Math.min(d,r.view.maxZoomLevel),d)),{svgPanZoom:v,onSvgPanZoomMounted:y,onSvgPanZoomUnmounted:_}=Qu(x,{viewportSelector:".v-viewport",minZoom:r.view.minZoomLevel,maxZoom:r.view.maxZoomLevel,fit:!0,center:!0,zoomEnabled:r.view.zoomEnabled,onZoom:d=>{var b,S;if(h.value===2)return;const M=(S=(b=v.value)==null?void 0:b.getRealZoom())!=null?S:1;Math.abs(p.value-M)>=1e-6&&(p.value=M,o.emit("view:zoom",M))},panEnabled:r.view.panEnabled,onPan:d=>{h.value!==2&&o.emit("view:pan",d)}});Ma({container:m,svg:x,viewport:g,svgPanZoom:v});const k={width:0,height:0},E=new ResizeObserver(()=>{var d,b,S;(d=v.value)==null||d.resize();const M=(b=m.value)==null?void 0:b.getBoundingClientRect();if(M){const z=-(k.width-M.width)/2,B=-(k.height-M.height)/2;(S=v.value)==null||S.panBy({x:z,y:B});const{width:W,height:ee}=M;Object.assign(k,{width:W,height:ee}),o.emit("view:resize",{x:M.x,y:M.y,width:W,height:ee})}});y(()=>{var d,b;const S=se(m.value,"svg-pan-zoom container");E.observe(S),(b=(d=r.view).onSvgPanZoomInitialized)==null||b.call(d,se(v.value,"svg-pan-zoom instance"));const M=S.getBoundingClientRect(),{width:z,height:B}=M;Object.assign(k,{width:z,height:B})}),_(()=>{E.disconnect()});const T=d=>{var b;(b=v.value)==null||b.applyAbsoluteZoomLevel(d,r.view.minZoomLevel,r.view.maxZoomLevel)};X(()=>r.view.panEnabled,d=>{var b;(b=v.value)==null||b.setPanEnabled(d)}),X(()=>r.view.zoomEnabled,d=>{var b;(b=v.value)==null||b.setZoomEnabled(d)}),X(p,d=>T(d)),X(()=>[r.view.minZoomLevel,r.view.maxZoomLevel],d=>{T(p.value)});const{scale:I}=Ju(p,r.view);y(()=>{const d=e.zoomLevel;T(d)});const $=d=>{var b;Object.keys(e.nodes).length>0?((b=v.value)==null||b.updateBBox(),kn(d)):d()},N=()=>{$(()=>{v.value&&(v.value.fitToContents(),o.emit("view:fit",void 0))})},R=()=>{$(()=>{var d;(d=v.value)==null||d.center()})},Z=co(e,"selectedNodes",e.nodes,t);X(Z,d=>o.emit("node:select",Array.from(d)));const L=co(e,"selectedEdges",e.edges,t);X(L,d=>o.emit("edge:select",Array.from(d)));const ae=tt(new Set),K=tt(new Set),te=tt({nodes:{}});X(()=>e.layouts,()=>Object.assign(te,e.layouts),{deep:!0,immediate:!0}),X(te,()=>t("update:layouts",te),{deep:!0});const J=A(()=>r.node.focusring.visible),ne=Rl(),Ne=q(!1);o.on("node:dragstart",d=>Ne.value=!0),o.on("node:dragend",d=>Ne.value=!1),o.on("view:mode",d=>{var b,S,M,z;r.view.panEnabled&&(d==="default"?(b=v.value)==null||b.enablePan():(S=v.value)==null||S.disablePan()),r.view.zoomEnabled&&(d==="default"?(M=v.value)==null||M.enableZoom():(z=v.value)==null||z.disableZoom())});const{nodeStates:We,edgeStates:it}=$u(Ce(e.nodes),Ce(e.edges),Z,L,ae,K,Ce(r),te,I);Du(x,Ce(te.nodes),Ce(p),We,it,Z,L,ae,K,o);const V=A(()=>r.path.visible),F=()=>({layouts:tt(te.nodes),nodes:Ce(e.nodes),edges:Ce(e.edges),configs:Ce(r),scale:Ce(I),emitter:o,svgPanZoom:se(v.value)});return X(()=>r.view.layoutHandler,(d,b)=>{b.deactivate(),d.activate(F())}),y(()=>{$(()=>{const d=se(v.value,"svg-pan-zoom");d.center(),r.view.layoutHandler.activate(F()),kn(()=>{if(Object.keys(e.nodes).length>0)r.view.fit?N():R();else{const b=d.getSizes();d.pan({x:b.width/2,y:b.height/2})}o.emit("view:load"),h.value=1})})}),_(()=>{h.value=2,o.emit("view:unload"),r.view.layoutHandler.deactivate()}),{container:m,svg:x,viewport:g,show:w,svgPanZoom:v,allConfigs:r,layerDefs:s,isShowGrid:a,isShowBackgroundViewport:i,overrideNodes:u,overrideNodeLabels:c,overrideEdgeLabels:l,overrideEdgesLabels:f,scale:I,nodeStates:We,currentSelectedNodes:Z,markers:ne,dragging:Ne,currentLayouts:te,visibleNodeFocusRing:J,visiblePaths:V,fitToContents:N,panToCenter:R}},methods:{zoomIn(){var e;(e=this.svgPanZoom)==null||e.zoomIn()},zoomOut(){var e;(e=this.svgPanZoom)==null||e.zoomOut()},panTo(e){var t;(t=this.svgPanZoom)==null||t.pan(e)},panBy(e){var t;(t=this.svgPanZoom)==null||t.panBy(e)},getPan(){return se(this.svgPanZoom).getPan()},getSizes(){const e=se(this.svgPanZoom).getSizes();return{width:e.width,height:e.height,viewBox:e.viewBox}},translateFromDomToSvgCoordinates(e){return Aa(se(this.svg,"svg"),se(this.viewport,"viewport"),e)},translateFromSvgToDomCoordinates(e){return Ca(se(this.svg,"svg"),se(this.viewport,"viewport"),e)},getAsSvg(){const e=se(this.svg,"svg"),t=se(this.viewport,"svg viewport"),n=e.cloneNode(!0),o=t.getBBox(),r=1/this.scale,s={x:Math.floor((o.x-10)*r),y:Math.floor((o.y-10)*r),width:Math.ceil((o.width+20)*r),height:Math.ceil((o.height+20)*r)};n.setAttribute("width",s.width.toString()),n.setAttribute("height",s.height.toString());const a=n.querySelector(".v-viewport");a.setAttribute("transform",`translate(${-s.x} ${-s.y}), scale(${r})`),a.removeAttribute("style"),n.setAttribute("viewBox",`0 0 ${s.width} ${s.height}`);let i=n.outerHTML;return i=i.replaceAll(/ data-v-[0-9a-z]+=""/g,""),i=i.replaceAll(/<!--[\s\S]*?-->/gm,""),i}}}),Jc={ref:"container",class:"v-network-graph"},ed={key:0},td={ref:"viewport",class:"v-viewport"},nd={class:"v-layer-edges"},od={key:2,class:"v-layer-nodes-selections"};function rd(e,t,n,o,r,s){const a=ke("v-marker-head"),i=ke("v-background-grid"),u=ke("v-background-viewport"),c=ke("v-edge-backgrounds"),l=ke("v-edge-groups"),f=ke("v-edge-labels"),m=ke("v-node-focus-ring"),x=ke("v-node"),g=ke("v-paths");return O(),C("div",Jc,[(O(),C("svg",{ref:"svg",class:ge(["v-canvas",{show:e.show,dragging:e.dragging}]),width:"500",height:"500",viewBox:"0 0 500 500"},[(O(!0),C(G,null,Q(e.layerDefs.root,h=>ue(e.$slots,h,{key:h,scale:e.scale},void 0,!0)),128)),Object.keys(e.markers).length>0?(O(),C("defs",ed,[(O(!0),C(G,null,Q(e.markers,(h,w)=>(O(),le(a,{id:w,key:w,marker:h,scale:e.scale},null,8,["id","marker","scale"]))),128))])):pe("",!0),e.isShowBackgroundViewport?(O(),le(u,{key:1},{default:Ge(()=>[(O(!0),C(G,null,Q(e.layerDefs.background,h=>(O(),C("g",{key:h,class:"v-layer"},[ue(e.$slots,h,{scale:e.scale},void 0,!0)]))),128)),e.isShowGrid?(O(),le(i,{key:0})):pe("",!0),(O(!0),C(G,null,Q(e.layerDefs.grid,h=>(O(),C("g",{key:h,class:"v-layer"},[ue(e.$slots,h,{scale:e.scale},void 0,!0)]))),128))]),_:3})):pe("",!0),Vt("g",td,[(O(!0),C(G,null,Q(e.layerDefs.base,h=>(O(),C("g",{key:h,class:"v-layer"},[ue(e.$slots,h,{scale:e.scale},void 0,!0)]))),128)),Vt("g",nd,[Le(c),Le(l)]),(O(!0),C(G,null,Q(e.layerDefs.edges,h=>(O(),C("g",{key:h,class:"v-layer"},[ue(e.$slots,h,{scale:e.scale},void 0,!0)]))),128)),e.overrideEdgeLabels?(O(),le(f,{key:0},{"edge-label":Ge(h=>[ue(e.$slots,"edge-label",Pt(Et(h)),void 0,!0)]),_:3})):pe("",!0),e.overrideEdgesLabels?(O(),le(f,{key:1},{"edges-label":Ge(h=>[ue(e.$slots,"edges-label",Pt(Et(h)),void 0,!0)]),_:3})):pe("",!0),e.visibleNodeFocusRing?(O(),C("g",od,[(O(!0),C(G,null,Q(e.currentSelectedNodes,h=>(O(),le(m,{id:h,key:h,state:e.nodeStates[h],pos:e.currentLayouts.nodes[h]},null,8,["id","state","pos"]))),128))])):pe("",!0),(O(!0),C(G,null,Q(e.layerDefs.focusring,h=>(O(),C("g",{key:h,class:"v-layer"},[ue(e.$slots,h,{scale:e.scale},void 0,!0)]))),128)),Le(In,{name:e.allConfigs.node.transition,css:!!e.allConfigs.node.transition,tag:"g",class:"v-layer-nodes"},{default:Ge(()=>[(O(!0),C(G,null,Q(e.nodeStates,(h,w)=>(O(),le(x,{id:w.toString(),key:w,state:h,pos:e.currentLayouts.nodes[w]},xr({_:2},[e.overrideNodes?{name:"override-node",fn:Ge(p=>[ue(e.$slots,"override-node",Pt(Et(p)),void 0,!0)])}:void 0,e.overrideNodeLabels?{name:"override-node-label",fn:Ge(p=>[ue(e.$slots,"override-node-label",Pt(Et(p)),void 0,!0)])}:void 0]),1032,["id","state","pos"]))),128))]),_:3},8,["name","css"]),(O(!0),C(G,null,Q(e.layerDefs.nodes,h=>(O(),C("g",{key:h,class:"v-layer"},[ue(e.$slots,h,{scale:e.scale},void 0,!0)]))),128)),e.visiblePaths?(O(),le(g,{key:3,paths:e.paths,edges:e.edges},null,8,["paths","edges"])):pe("",!0),(O(!0),C(G,null,Q(e.layerDefs.paths,h=>(O(),C("g",{key:h,class:"v-layer"},[ue(e.$slots,h,{scale:e.scale},void 0,!0)]))),128))],512)],2))],512)}var id=Ee(Qc,[["render",rd],["__scopeId","data-v-deffa7e6"]]);const sd=oe({props:{area:{type:Object,required:!0},config:{type:Object,required:!0},text:{type:String,required:!1,default:""},align:{type:String,required:!1,default:"center"},verticalAlign:{type:String,required:!1,default:"center"},edge:{type:Object,required:!1,default:void 0},hovered:{type:Boolean,required:!1,default:!1},selected:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:void 0}},setup(e,{expose:t}){const n=e,o=q(0),r=q(0),s=q("middle"),a=q("central"),i=q(0);Oe(()=>{const c=n.area.source,l=n.area.target;n.align==="source"?(c.above.x==l.above.x?s.value=c.above.y>l.above.y?"start":"end":s.value=c.above.x<l.above.x?"start":"end",n.verticalAlign==="above"?(o.value=c.above.x,r.value=c.above.y,a.value="text-top"):n.verticalAlign==="below"?(o.value=c.below.x,r.value=c.below.y,a.value="hanging"):(o.value=(c.above.x+c.below.x)/2,r.value=(c.above.y+c.below.y)/2,a.value="central")):n.align==="target"?(c.above.x==l.above.x?s.value=c.above.y<l.above.y?"start":"end":s.value=c.above.x>l.above.x?"start":"end",n.verticalAlign==="above"?(o.value=l.above.x,r.value=l.above.y,a.value="text-top"):n.verticalAlign==="below"?(o.value=l.below.x,r.value=l.below.y,a.value="hanging"):(o.value=(l.above.x+l.below.x)/2,r.value=(l.above.y+l.below.y)/2,a.value="central")):(s.value="middle",n.verticalAlign==="above"?(o.value=(c.above.x+l.above.x)/2,r.value=(c.above.y+l.above.y)/2,a.value="text-top"):n.verticalAlign==="below"?(o.value=(c.below.x+l.below.x)/2,r.value=(c.below.y+l.below.y)/2,a.value="hanging"):(o.value=(c.above.x+l.below.x)/2,r.value=(c.above.y+l.below.y)/2,a.value="central"));let f=Rt(c.above,l.above).v.angleDeg();(f<-90||f>=90)&&(f=f+180,f>180&&(f-=360)),i.value=f});const u=A(()=>a.value==="central"&&!n.config.background?Xt($e({},n.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):n.config);return t({x:o,y:r,textAnchor:s,dominantBaseline:a,angle:i,updatedConfig:u}),(c,l)=>(O(),le(Ut,{class:"v-edge-label",text:e.text,x:o.value,y:r.value,config:P(u),"text-anchor":s.value,"dominant-baseline":a.value,transform:`rotate(${i.value} ${o.value} ${r.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}});var ad=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",VNetworkGraph:id,VEdgeLabel:sd,VLabelText:Ut});const ld=10;class fd extends Oo{constructor(t={}){super();this.options=t}setNodePosition(t,n){const o=this.options.grid||ld;t.value.x=Math.floor(n.x/o)*o,t.value.y=Math.floor(n.y/o)*o}}const hd=function(e){Object.entries(ad).forEach(([t,n])=>{e.component(t,n)})};export{fd as G,j as N,sd as _,cd as c,dd as g,hd as i};
